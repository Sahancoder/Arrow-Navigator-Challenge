{"version":3,"sources":["script.js"],"names":["cont","document","getElementById","maze","thingie","emo","bd","bl","br","step","size","bwidth","mazeHeight","mazeWidth","nogoX","nogoX2","nogoY","nogoY2","prevDist","lastLR","mThreshold","firstMove","allowTilt","scThreshold","genSides","u","my","i","mx","sg","l","d","a","r","v","grid","push","dirs","modDir","y","x","o","genMaze","barriers","getElementsByClassName","b","length","offsetLeft","clientWidth","offsetTop","clientHeight","keys","e","code","drawMaze","up","down","right","left","animKeys","bu","checkYboundry","style","top","addEventListener","updateEmo","checkXboundry","dir","len","Math","max","check","ok","every","res","l1","floor","random","l2","lb1","height","lb2","rb1","createElement","rb2","els","appendChild","el","setAttribute","home","cx","limShuffle","s","confSideEl","cy","nx","ny","drawLines","width","array","ran","j","_ref","key","borderTop","borderBottom","transform","id","slice","border","borderLeft","borderRight","comb","lr","maxl","innerHTML","setTimeout","prevl","offsetTo","tiltTimer","handleOrientation","lastUD","beta","gamma","window","haveEvents","gp","allowR","allowAU","allowAD","gamepad","requestAnimationFrame","updateStatus","scangamepads","buttons","pressed","allowU","allowD","allowL","gpTimer","console","log","axes","allowAL","allowAR","gamepads","navigator","getGamepads","webkitGetGamepads","gpATimer","index","addgamepad","adir","setInterval","connectGamepad","disconnectGamepad","lasttouchpY","lasttouchpX","changedTouches","pageY","pageX","preventDefault","diffX","sThreshold","diffY","lastscrollpY","deltaY","lastscrollpX","deltaX"],"mappings":"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","file":"script.min.js","sourcesContent":["const cont = document.getElementById(\"container\");\r\nconst maze = document.getElementById(\"maze\");\r\nconst thingie = document.getElementById(\"thingie\");\r\nconst home = document.getElementById(\"home\");\r\nconst emo = document.getElementById(\"emo\");\r\n\r\nconst bu = document.getElementById(\"bu\");\r\nconst bd = document.getElementById(\"bd\");\r\nconst bl = document.getElementById(\"bl\");\r\nconst br = document.getElementById(\"br\");\r\n\r\nconst step = 20;\r\nconst size = 20;\r\nconst bwidth = 2;\r\nconst mazeHeight = 200;\r\nconst mazeWidth = 300;\r\nlet nogoX = [];\r\nlet nogoX2 = [];\r\nlet nogoY = [];\r\nlet nogoY2 = [];\r\nlet prevDist = mazeWidth * 2;\r\n\r\n//tilt vars\r\nlet lastUD = 0;\r\nlet lastLR = 0;\r\nconst mThreshold = 15;\r\nlet firstMove = true;\r\nlet allowTilt = true;\r\n\r\n//swipe vars\r\nconst sThreshold = 15;\r\n\r\n//scroll vars\r\nconst scThreshold = 20;\r\n\r\n//generate sides and starting position\r\ngenSides();\r\n\r\n//define size\r\nlet my = mazeHeight / step;\r\nlet mx = mazeWidth / step;\r\n\r\n//create full grid\r\nlet grid = [];\r\nfor (let i = 0; i < my; i++) {\r\n\tlet sg = [];\r\n\tfor (let a = 0; a < mx; a++) {\r\n\t\tsg.push({ u: 0, d: 0, l: 0, r: 0, v: 0 });\r\n\t}\r\n\tgrid.push(sg);\r\n}\r\n\r\n//create direction arrays\r\nlet dirs = [\"u\", \"d\", \"l\", \"r\"];\r\nlet modDir = {\r\n\tu: { y: -1, x: 0, o: \"d\" },\r\n\td: { y: 1, x: 0, o: \"u\" },\r\n\tl: { y: 0, x: -1, o: \"r\" },\r\n\tr: { y: 0, x: 1, o: \"l\" }\r\n};\r\n\r\n//generate maze\r\ngenMaze(0, 0, 0);\r\ndrawMaze();\r\n\r\n//get all the barriers\r\nconst barriers = document.getElementsByClassName(\"barrier\");\r\nfor (let b = 0; b < barriers.length; b++) {\r\n\tnogoX.push(barriers[b].offsetLeft);\r\n\tnogoX2.push(barriers[b].offsetLeft + barriers[b].clientWidth);\r\n\tnogoY.push(barriers[b].offsetTop);\r\n\tnogoY2.push(barriers[b].offsetTop + barriers[b].clientHeight);\r\n}\r\n//console.log(nogoX, nogoX2, nogoY, nogoY2);\r\n\r\ndocument.addEventListener(\"keydown\", keys);\r\n\r\nfunction keys(e) {\r\n\tlet code = e.code;\r\n\tswitch (code) {\r\n\t\t//arrows\r\n\t\tcase \"ArrowUp\":\r\n\t\t\tup();\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowDown\":\r\n\t\t\tdown();\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowLeft\":\r\n\t\t\tleft();\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowRight\":\r\n\t\t\tright();\r\n\t\t\tbreak;\r\n\t\t//wasd\r\n\t\tcase \"KeyW\":\r\n\t\t\tup();\r\n\t\t\tbreak;\r\n\t\tcase \"KeyS\":\r\n\t\t\tdown();\r\n\t\t\tbreak;\r\n\t\tcase \"KeyA\":\r\n\t\t\tleft();\r\n\t\t\tbreak;\r\n\t\tcase \"KeyD\":\r\n\t\t\tright();\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\nbu.addEventListener(\"click\", (e) => {\r\n\tup();\r\n\tfirstMove = true;\r\n});\r\nbd.addEventListener(\"click\", (e) => {\r\n\tdown();\r\n\tfirstMove = true;\r\n});\r\nbl.addEventListener(\"click\", (e) => {\r\n\tleft();\r\n\tfirstMove = true;\r\n});\r\nbr.addEventListener(\"click\", (e) => {\r\n\tright();\r\n\tfirstMove = true;\r\n});\r\n\r\nfunction up() {\r\n\tanimKeys(bu);\r\n\tif (checkYboundry(\"u\")) {\r\n\t\tthingie.style.top = thingie.offsetTop - step + \"px\";\r\n\t\tupdateEmo(false);\r\n\t}\r\n}\r\n\r\nfunction down() {\r\n\tanimKeys(bd);\r\n\tif (checkYboundry(\"d\")) {\r\n\t\tthingie.style.top = thingie.offsetTop + step + \"px\";\r\n\t\tupdateEmo(false);\r\n\t}\r\n}\r\n\r\nfunction left() {\r\n\tanimKeys(bl);\r\n\tif (checkXboundry(\"l\")) {\r\n\t\tthingie.style.left = thingie.offsetLeft - step + \"px\";\r\n\t}\r\n\tupdateEmo(true);\r\n}\r\n\r\nfunction right() {\r\n\tanimKeys(br);\r\n\tif (checkXboundry(\"r\")) {\r\n\t\tthingie.style.left = thingie.offsetLeft + step + \"px\";\r\n\t}\r\n\tupdateEmo(true);\r\n}\r\n\r\n//check if one can move horizontally\r\nfunction checkXboundry(dir) {\r\n\tlet x = thingie.offsetLeft;\r\n\tlet y = thingie.offsetTop;\r\n\tlet ok = [];\r\n\tlet len = Math.max(nogoX.length, nogoX2.length, nogoY.length, nogoY2.length);\r\n\r\n\tlet check = 0;\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tcheck = 0;\r\n\t\tif (y < nogoY[i] || y > nogoY2[i] - size) {\r\n\t\t\tcheck = 1;\r\n\t\t}\r\n\t\tif (dir === \"r\") {\r\n\t\t\tif (x < nogoX[i] - size || x > nogoX2[i] - size) {\r\n\t\t\t\tcheck = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (dir === \"l\") {\r\n\t\t\tif (x < nogoX[i] || x > nogoX2[i]) {\r\n\t\t\t\tcheck = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tok.push(check);\r\n\t}\r\n\t//check what to return\r\n\tlet res = ok.every(function (e) {\r\n\t\treturn e > 0;\r\n\t});\r\n\treturn res;\r\n}\r\n\r\n//check if one can move vertically\r\nfunction checkYboundry(dir) {\r\n\tlet x = thingie.offsetLeft;\r\n\tlet y = thingie.offsetTop;\r\n\tlet ok = [];\r\n\tlet len = Math.max(nogoX.length, nogoX2.length, nogoY.length, nogoY2.length);\r\n\r\n\tlet check = 0;\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tcheck = 0;\r\n\t\tif (x < nogoX[i] || x > nogoX2[i] - size) {\r\n\t\t\tcheck = 1;\r\n\t\t}\r\n\t\tif (dir === \"u\") {\r\n\t\t\tif (y < nogoY[i] || y > nogoY2[i]) {\r\n\t\t\t\tcheck = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (dir === \"d\") {\r\n\t\t\tif (y < nogoY[i] - size || y > nogoY2[i] - size) {\r\n\t\t\t\tcheck = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tok.push(check);\r\n\t}\r\n\t//check what to return\r\n\tlet res = ok.every(function (e) {\r\n\t\treturn e > 0;\r\n\t});\r\n\treturn res;\r\n}\r\n\r\n//generate sides with random entry and exit points\r\nfunction genSides() {\r\n\tlet max = mazeHeight / step;\r\n\tlet l1 = Math.floor(Math.random() * max) * step;\r\n\t//let l1 = 0;\r\n\tlet l2 = mazeHeight - step - l1;\r\n\t//console.log(l1, l2);\r\n\r\n\tlet lb1 = document.createElement(\"div\");\r\n\tlb1.style.top = step + \"px\";\r\n\tlb1.style.left = step + \"px\";\r\n\tlb1.style.height = l1 + \"px\";\r\n\r\n\tlet lb2 = document.createElement(\"div\");\r\n\tlb2.style.top = l1 + step * 2 + \"px\";\r\n\tlb2.style.left = step + \"px\";\r\n\tlb2.style.height = l2 + \"px\";\r\n\r\n\tlet rb1 = document.createElement(\"div\");\r\n\trb1.style.top = step + \"px\";\r\n\trb1.style.left = mazeWidth + step + \"px\";\r\n\trb1.style.height = l2 + \"px\";\r\n\r\n\tlet rb2 = document.createElement(\"div\");\r\n\trb2.style.top = l2 + step * 2 + \"px\";\r\n\trb2.style.left = mazeWidth + step + \"px\";\r\n\trb2.style.height = l1 + \"px\";\r\n\r\n\t//create invisible barriers for start and end: vertical left, vertical right, left top, left bottom, right top, right bottom\r\n\tnogoX.push(0, mazeWidth + 2 * step, 0, 0, mazeWidth + step, mazeWidth + step);\r\n\tnogoX2.push(\r\n\t\t0 + bwidth,\r\n\t\tmazeWidth + 2 * step + bwidth,\r\n\t\tstep,\r\n\t\tstep,\r\n\t\tmazeWidth + 2 * step,\r\n\t\tmazeWidth + 2 * step\r\n\t);\r\n\tnogoY.push(\r\n\t\tl1 + step,\r\n\t\tl2 + step,\r\n\t\tl1 + step,\r\n\t\tl1 + 2 * step,\r\n\t\tl2 + step,\r\n\t\tl2 + 2 * step\r\n\t);\r\n\tnogoY2.push(\r\n\t\tl1 + 2 * step,\r\n\t\tl2 + 2 * step,\r\n\t\tl1 + step + bwidth,\r\n\t\tl1 + 2 * step + bwidth,\r\n\t\tl2 + step + bwidth,\r\n\t\tl2 + 2 * step + bwidth\r\n\t);\r\n\t//set start-pos\r\n\tthingie.style.top = l1 + step + \"px\";\r\n\tthingie.style.left = 0 + \"px\";\r\n\t//set end-pos & store height of end\r\n\thome.style.top = l2 + step + \"px\";\r\n\thome.style.left = mazeWidth + step + \"px\";\r\n\r\n\t//style & append\r\n\tlet els = [lb1, lb2, rb1, rb2];\r\n\tfor (let i = 0; i < els.length; i++) {\r\n\t\tconfSideEl(els[i]);\r\n\t\tmaze.appendChild(els[i]);\r\n\t}\r\n}\r\n\r\nfunction confSideEl(el) {\r\n\tel.setAttribute(\"class\", \"barrier\");\r\n\tel.style.width = bwidth + \"px\";\r\n}\r\n\r\n//gen maze using Recursive Backtracking\r\nfunction genMaze(cx, cy, s) {\r\n\t// shuffle unchecked directions\r\n\tlet d = limShuffle(dirs, s);\r\n\r\n\tfor (let i = 0; i < d.length; i++) {\r\n\t\tlet nx = cx + modDir[d[i]].x;\r\n\t\tlet ny = cy + modDir[d[i]].y;\r\n\t\tgrid[cy][cx].v = 1;\r\n\r\n\t\tif (nx >= 0 && nx < mx && ny >= 0 && ny < my && grid[ny][nx].v === 0) {\r\n\t\t\tgrid[cy][cx][d[i]] = 1;\r\n\t\t\tgrid[ny][nx][modDir[d[i]].o] = 1;\r\n\t\t\t//avoid shuffling d if d's not exhausted.. hence the i\r\n\t\t\tgenMaze(nx, ny, i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//draw maze\r\nfunction drawMaze() {\r\n\tfor (let x = 0; x < mx; x++) {\r\n\t\tfor (let y = 0; y < my; y++) {\r\n\t\t\tlet l = grid[y][x].l;\r\n\t\t\tlet r = grid[y][x].r;\r\n\t\t\tlet u = grid[y][x].u;\r\n\t\t\tlet d = grid[y][x].d;\r\n\r\n\t\t\tdrawLines(x, y, l, r, u, d);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//draw the actual lines\r\nfunction drawLines(x, y, l, r, u, d) {\r\n\tlet top = (y + 1) * step;\r\n\tlet left = (x + 1) * step;\r\n\tif (l === 0 && x > 0) {\r\n\t\tlet el = document.createElement(\"div\");\r\n\t\tel.style.left = left + \"px\";\r\n\t\tel.style.height = step + \"px\";\r\n\t\tel.style.top = top + \"px\";\r\n\t\tel.setAttribute(\"class\", \"barrier\");\r\n\t\tel.style.width = bwidth + \"px\";\r\n\t\tmaze.appendChild(el);\r\n\t}\r\n\r\n\tif (d === 0 && y < my - 1) {\r\n\t\tlet el = document.createElement(\"div\");\r\n\t\tel.style.left = left + \"px\";\r\n\t\tel.style.height = bwidth + \"px\";\r\n\t\tel.style.top = top + step + \"px\";\r\n\t\tel.setAttribute(\"class\", \"barrier\");\r\n\t\tel.style.width = step + bwidth + \"px\";\r\n\t\tmaze.appendChild(el);\r\n\t}\r\n}\r\n\r\nfunction limShuffle(array, s) {\r\n\tlet con = array.slice(0, s);\r\n\tlet ran = array.slice(s, array.length);\r\n\r\n\tfor (let i = ran.length - 1; i > 0; i--) {\r\n\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t//console.log(i, j);\r\n\t\t[ran[i], ran[j]] = [ran[j], ran[i]];\r\n\t}\r\n\tlet comb = con.concat(ran);\r\n\treturn comb;\r\n}\r\n\r\nfunction animKeys(key) {\r\n\tif (key.id === \"bu\") {\r\n\t\tkey.style.border = \"3px #fff solid\";\r\n\t\tkey.style.borderTop = \"1px #fff solid\";\r\n\t\tkey.style.borderBottom = \"4px #fff solid\";\r\n\t\tkey.style.transform = \"translateY(-2px)\";\r\n\t}\r\n\tif (key.id === \"bd\") {\r\n\t\tkey.style.border = \"3px #fff solid\";\r\n\t\tkey.style.borderBottom = \"1px #fff solid\";\r\n\t\tkey.style.borderTop = \"4px #fff solid\";\r\n\t\tkey.style.transform = \"translateY(2px)\";\r\n\t}\r\n\tif (key.id === \"bl\") {\r\n\t\tkey.style.border = \"3px #fff solid\";\r\n\t\tkey.style.borderLeft = \"1px #fff solid\";\r\n\t\tkey.style.borderRight = \"4px #fff solid\";\r\n\t\tkey.style.transform = \"translateX(-2px)\";\r\n\t}\r\n\tif (key.id === \"br\") {\r\n\t\tkey.style.border = \"3px #fff solid\";\r\n\t\tkey.style.borderRight = \"1px #fff solid\";\r\n\t\tkey.style.borderLeft = \"4px #fff solid\";\r\n\t\tkey.style.transform = \"translateX(2px)\";\r\n\t}\r\n\r\n\t//reset\r\n\tsetTimeout(() => {\r\n\t\tkey.style.border = \"2px #fff solid\";\r\n\t\tkey.style.borderTop = \"2px #fff solid\";\r\n\t\tkey.style.borderBottom = \"2px #fff solid\";\r\n\t\tkey.style.borderLeft = \"2px #fff solid\";\r\n\t\tkey.style.borderRight = \"2px #fff solid\";\r\n\t\tkey.style.transform = \"translateY(0px)\";\r\n\t\tkey.style.transform = \"translateX(0px)\";\r\n\t}, \"150\");\r\n}\r\n\r\nlet maxl = 0;\r\nlet prevl = 0;\r\nfunction updateEmo(lr) {\r\n\t//simple/manual emo-adjustment - old\r\n\tif (lr) {\r\n\t\tif (thingie.offsetLeft < maxl) {\r\n\t\t\temo.innerHTML = \"🙄\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft < maxl - 2 * step) {\r\n\t\t\temo.innerHTML = \"😒\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft < maxl - 4 * step) {\r\n\t\t\temo.innerHTML = \"😣\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft < maxl - 6 * step) {\r\n\t\t\temo.innerHTML = \"🤬\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft > prevl) {\r\n\t\t\temo.innerHTML = \"😐\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft >= maxl) {\r\n\t\t\tif (thingie.offsetLeft > mazeWidth * 0.6) {\r\n\t\t\t\temo.innerHTML = \"😀\";\r\n\t\t\t} else {\r\n\t\t\t\temo.innerHTML = \"🙂\";\r\n\t\t\t}\r\n\t\t\tmaxl = thingie.offsetLeft;\r\n\t\t}\r\n\t\tif (thingie.offsetLeft === 0) {\r\n\t\t\temo.innerHTML = \"😢\";\r\n\t\t}\r\n\t\tif (\r\n\t\t\tthingie.offsetLeft > mazeWidth - step &&\r\n\t\t\tthingie.offsetTop === home.offsetTop\r\n\t\t) {\r\n\t\t\temo.innerHTML = \"🤗\";\r\n\t\t\thome.innerHTML = \"🏠\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft > mazeWidth) {\r\n\t\t\temo.innerHTML = \"\";\r\n\t\t\thome.innerHTML = \"🥳\";\r\n\t\t}\r\n\t\tprevl = thingie.offsetLeft;\r\n\t} else {\r\n\t\tif (thingie.offsetLeft > (mazeWidth - step) && thingie.offsetTop === home.offsetTop) {\r\n\t\t\temo.innerHTML = \"🤗\";\r\n\t\t}else{\r\n\t\t\tif(thingie.offsetLeft > (mazeWidth - step) && thingie.offsetTop != home.offsetTo){\r\n\t\t\t\temo.innerHTML = \"🙄\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// \t//Variant: Detect distance to target using old Greeks: Phytagoras (More scientifically interesting, but somehow less funny 🙃)\r\n\t// \tlet h = home.offsetLeft - thingie.offsetLeft;\r\n\t// \tlet v = Math.abs(home.offsetTop - thingie.offsetTop);\r\n\t// \tlet dist = Math.hypot(h, v);\r\n\t// \tconsole.log(h, v, dist);\r\n\r\n\t// \t//dist = h;\r\n\r\n\t// \t//dynamic stuff\r\n\t// \tif (dist <= prevDist) {\r\n\t// \t\t//happy\r\n\t// \t\temo.innerHTML = \"😀\";\r\n\t// \t} else {\r\n\t// \t\t//sad\r\n\t// \t\temo.innerHTML = \"🙄\";\r\n\t// \t}\r\n\r\n\t// \t//fixed values\r\n\t// \tif (dist === 20) {\r\n\t// \t\temo.innerHTML = \"🤗\";\r\n\t// \t}\r\n\t// \tif (dist === 0) {\r\n\t// \t\temo.innerHTML = \"🥳\";\r\n\t// \t\thome.innerHTML = \"\";\r\n\t// \t} else {\r\n\t// \t\thome.innerHTML = \"🏠\";\r\n\t// \t}\r\n\r\n\t// \tprevDist = dist;\r\n}\r\n\r\n//navigate with tilting\r\nwindow.addEventListener(\"deviceorientation\", handleOrientation);\r\n\r\nfunction tiltTimer() {\r\n\tallowTilt = false;\r\n\tsetTimeout(() => {\r\n\t\tallowTilt = true;\r\n\t}, \"200\");\r\n}\r\n\r\nfunction handleOrientation(e) {\r\n\t//up/down = beta (smaller = up)\r\n\t//left/right = gamma (neg = left)\r\n\r\n\tif (firstMove) {\r\n\t\tlastUD = e.beta;\r\n\t\tlastLR = e.gamma;\r\n\t\tfirstMove = false;\r\n\t}\r\n\tif (allowTilt) {\r\n\t\tif (e.beta < lastUD - mThreshold) {\r\n\t\t\tup();\r\n\t\t\ttiltTimer();\r\n\t\t}\r\n\t\tif (e.beta > lastUD + mThreshold) {\r\n\t\t\tdown();\r\n\t\t\ttiltTimer();\r\n\t\t}\r\n\t\tif (e.gamma < lastLR - mThreshold) {\r\n\t\t\tleft();\r\n\t\t\ttiltTimer();\r\n\t\t}\r\n\t\tif (e.gamma > lastLR + mThreshold) {\r\n\t\t\tright();\r\n\t\t\ttiltTimer();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//navigate with controller\r\nlet haveEvents = \"ongamepadconnected\" in window;\r\nlet gp = [];\r\nlet allowU = true;\r\nlet allowD = true;\r\nlet allowL = true;\r\nlet allowR = true;\r\n\r\nlet allowAU = true;\r\nlet allowAD = true;\r\nlet allowAL = true;\r\nlet allowAR = true;\r\n\r\nwindow.addEventListener(\"gamepadconnected\", connectGamepad);\r\nwindow.addEventListener(\"gamepaddisconnected\", disconnectGamepad);\r\n\r\nfunction disconnectGamepad() {\r\n\tgp = [];\r\n}\r\n\r\nfunction connectGamepad(e) {\r\n\tconsole.log(\"trying to connect\");\r\n\tgp[0] = e.gamepad;\r\n\trequestAnimationFrame(updateStatus);\r\n}\r\n\r\nfunction updateStatus() {\r\n\tif (!haveEvents) {\r\n\t\tscangamepads();\r\n\t}\r\n\r\n\tfor (let i = 0; i < gp[0].buttons.length; i++) {\r\n\t\t//up\r\n\t\tif (gp[0].buttons[12].pressed) {\r\n\t\t\tif (allowU) {\r\n\t\t\t\tup();\r\n\t\t\t\tgpTimer(\"u\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].buttons[12].pressed === false) {\r\n\t\t\tallowU = true;\r\n\t\t}\r\n\r\n\t\t//down\r\n\t\tif (gp[0].buttons[13].pressed) {\r\n\t\t\tif (allowD) {\r\n\t\t\t\tdown();\r\n\t\t\t\tgpTimer(\"d\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].buttons[13].pressed === false) {\r\n\t\t\tallowD = true;\r\n\t\t}\r\n\r\n\t\t//left\r\n\t\tif (gp[0].buttons[14].pressed) {\r\n\t\t\tif (allowL) {\r\n\t\t\t\tleft();\r\n\t\t\t\tgpTimer(\"l\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].buttons[14].pressed === false) {\r\n\t\t\tallowL = true;\r\n\t\t}\r\n\r\n\t\t//up\r\n\t\tif (gp[0].buttons[15].pressed) {\r\n\t\t\tif (allowR) {\r\n\t\t\t\tright();\r\n\t\t\t\tgpTimer(\"r\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].buttons[15].pressed === false) {\r\n\t\t\tallowR = true;\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let j = 0; j < gp[0].axes.length; j++) {\r\n\t\t//console.log(gp[0].axes[3]);\r\n\t\tif (gp[0].axes[1] < -0.8 || gp[0].axes[3] < -0.8) {\r\n\t\t\tif (allowAU) {\r\n\t\t\t\tup();\r\n\t\t\t\tgpATimer(\"u\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].axes[1] > 0.8 || gp[0].axes[3] > 0.8) {\r\n\t\t\tif (allowAD) {\r\n\t\t\t\tdown();\r\n\t\t\t\tgpATimer(\"d\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].axes[0] < -0.8 || gp[0].axes[2] < -0.8) {\r\n\t\t\tif (allowAL) {\r\n\t\t\t\tleft();\r\n\t\t\t\tgpATimer(\"l\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].axes[0] > 0.8 || gp[0].axes[2] > 0.8) {\r\n\t\t\tif (allowAR) {\r\n\t\t\t\tright();\r\n\t\t\t\tgpATimer(\"r\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trequestAnimationFrame(updateStatus);\r\n}\r\n\r\nfunction scangamepads() {\r\n\tvar gamepads = navigator.getGamepads\r\n\t\t? navigator.getGamepads()\r\n\t\t: navigator.webkitGetGamepads\r\n\t\t? navigator.webkitGetGamepads()\r\n\t\t: [];\r\n\tfor (var i = 0; i < gamepads.length; i++) {\r\n\t\tif (gamepads[i]) {\r\n\t\t\tif (gamepads[i].index in gp) {\r\n\t\t\t\tgp[gamepads[i].index] = gamepads[i];\r\n\t\t\t} else {\r\n\t\t\t\taddgamepad(gamepads[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nif (!haveEvents) {\r\n\tsetInterval(scangamepads, 500);\r\n}\r\n\r\nfunction gpTimer(adir) {\r\n\tswitch (adir) {\r\n\t\tcase \"u\":\r\n\t\t\tallowU = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"d\":\r\n\t\t\tallowD = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"l\":\r\n\t\t\tallowL = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"r\":\r\n\t\t\tallowR = false;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tsetTimeout(() => {\r\n\t\tallowU = true;\r\n\t\tallowD = true;\r\n\t\tallowL = true;\r\n\t\tallowR = true;\r\n\t}, \"200\");\r\n}\r\n\r\nfunction gpATimer(adir) {\r\n\tswitch (adir) {\r\n\t\tcase \"u\":\r\n\t\t\tallowAU = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"d\":\r\n\t\t\tallowAD = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"l\":\r\n\t\t\tallowAL = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"r\":\r\n\t\t\tallowAR = false;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tsetTimeout(() => {\r\n\t\tallowAU = true;\r\n\t\tallowAD = true;\r\n\t\tallowAL = true;\r\n\t\tallowAR = true;\r\n\t}, \"200\");\r\n}\r\n\r\n\r\n\r\n//Navigate with swipe\r\nlet lasttouchpY = 0;\r\nlet lasttouchpX = 0;\r\ncont.addEventListener(\"touchstart\", (e) => {\r\n\tlasttouchpY = e.changedTouches[0].pageY;\r\n\tlasttouchpX = e.changedTouches[0].pageX;\r\n});\r\n\r\ncont.addEventListener(\"touchmove\", (e) => {\r\n\te.preventDefault();\r\n\t//console.log(\"touch \" + e.changedTouches[0].pageY);\r\n\tlet diffY = e.changedTouches[0].pageY - lasttouchpY;\r\n\tlet diffX = e.changedTouches[0].pageX - lasttouchpX;\r\n\tif (diffY > sThreshold) {\r\n\t\tdown();\r\n\t\tlasttouchpY = e.changedTouches[0].pageY;\r\n\t} else {\r\n\t\tif (diffY < -1 * sThreshold) {\r\n\t\t\tup();\r\n\t\t\tlasttouchpY = e.changedTouches[0].pageY;\r\n\t\t}\r\n\t}\r\n\tif (diffX > sThreshold) {\r\n\t\tright();\r\n\t\tlasttouchpX = e.changedTouches[0].pageX;\r\n\t} else {\r\n\t\tif (diffX < -1 * sThreshold) {\r\n\t\t\tleft();\r\n\t\t\tlasttouchpX = e.changedTouches[0].pageX;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n//Navigate with scrolling\r\nlet lastscrollpY = 0;\r\nlet lastscrollpX = 0;\r\ncont.addEventListener(\"wheel\", (e) => {\r\n\t//console.log(\"scrollY: \" + e.deltaY + \" scrollX: \" + e.deltaX);\r\n\r\n\t//handle Y scrolling\r\n\tlastscrollpY = lastscrollpY + e.deltaY;\r\n\tif (lastscrollpY > 0 && e.deltaY < 0) {\r\n\t\tlastscrollpY = 0;\r\n\t}\r\n\tif (lastscrollpY < 0 && e.deltaY > 0) {\r\n\t\tlastscrollpY = 0;\r\n\t}\r\n\r\n\tif (lastscrollpY > scThreshold) {\r\n\t\tup();\r\n\t\tlastscrollpY = 0;\r\n\t}\r\n\t\tif (lastscrollpY < (-1 * scThreshold)) {\r\n\t\tdown();\r\n\t\tlastscrollpY = 0;\r\n\t}\r\n\t\r\n\t//handle X scrolling\r\n\tlastscrollpX = lastscrollpX + e.deltaX;\r\n\tif (lastscrollpX > 0 && e.deltaX < 0) {\r\n\t\tlastscrollpX = 0;\r\n\t}\r\n\tif (lastscrollpX < 0 && e.deltaX > 0) {\r\n\t\tlastscrollpX = 0;\r\n\t}\r\n\r\n\tif (lastscrollpX > scThreshold) {\r\n\t\tleft();\r\n\t\tlastscrollpX = 0;\r\n\t}\r\n\t\tif (lastscrollpX < (-1 * scThreshold)) {\r\n\t\tright();\r\n\t\tlastscrollpX = 0;\r\n\t}\r\n});\r\n"]}