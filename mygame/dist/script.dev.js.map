{"version":3,"sources":["script.js"],"names":["cont","document","getElementById","maze","thingie","home","emo","bu","bd","bl","br","step","size","bwidth","mazeHeight","mazeWidth","nogoX","nogoX2","nogoY","nogoY2","prevDist","lastUD","lastLR","mThreshold","firstMove","allowTilt","sThreshold","scThreshold","genSides","my","mx","grid","i","sg","a","push","u","d","l","r","v","dirs","modDir","y","x","o","genMaze","drawMaze","barriers","getElementsByClassName","b","length","offsetLeft","clientWidth","offsetTop","clientHeight","addEventListener","keys","e","code","up","down","left","right","animKeys","checkYboundry","style","top","updateEmo","checkXboundry","dir","ok","len","Math","max","check","res","every","l1","floor","random","l2","lb1","createElement","height","lb2","rb1","rb2","els","confSideEl","appendChild","el","setAttribute","width","cx","cy","s","limShuffle","nx","ny","drawLines","array","con","slice","ran","j","comb","concat","key","id","border","borderTop","borderBottom","transform","borderLeft","borderRight","setTimeout","maxl","prevl","lr","innerHTML","offsetTo","window","handleOrientation","tiltTimer","beta","gamma","haveEvents","gp","allowU","allowD","allowL","allowR","allowAU","allowAD","allowAL","allowAR","connectGamepad","disconnectGamepad","console","log","gamepad","requestAnimationFrame","updateStatus","scangamepads","buttons","pressed","gpTimer","axes","gpATimer","gamepads","navigator","getGamepads","webkitGetGamepads","index","addgamepad","setInterval","adir","lasttouchpY","lasttouchpX","changedTouches","pageY","pageX","preventDefault","diffY","diffX","lastscrollpY","lastscrollpX","deltaY","deltaX"],"mappings":";;AAAA,IAAMA,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAb;AACA,IAAMC,IAAI,GAAGF,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAb;AACA,IAAME,OAAO,GAAGH,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAhB;AACA,IAAMG,IAAI,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAb;AACA,IAAMI,GAAG,GAAGL,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAZ;AAEA,IAAMK,EAAE,GAAGN,QAAQ,CAACC,cAAT,CAAwB,IAAxB,CAAX;AACA,IAAMM,EAAE,GAAGP,QAAQ,CAACC,cAAT,CAAwB,IAAxB,CAAX;AACA,IAAMO,EAAE,GAAGR,QAAQ,CAACC,cAAT,CAAwB,IAAxB,CAAX;AACA,IAAMQ,EAAE,GAAGT,QAAQ,CAACC,cAAT,CAAwB,IAAxB,CAAX;AAEA,IAAMS,IAAI,GAAG,EAAb;AACA,IAAMC,IAAI,GAAG,EAAb;AACA,IAAMC,MAAM,GAAG,CAAf;AACA,IAAMC,UAAU,GAAG,GAAnB;AACA,IAAMC,SAAS,GAAG,GAAlB;AACA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,MAAM,GAAG,EAAb;AACA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,MAAM,GAAG,EAAb;AACA,IAAIC,QAAQ,GAAGL,SAAS,GAAG,CAA3B,C,CAEA;;AACA,IAAIM,MAAM,GAAG,CAAb;AACA,IAAIC,MAAM,GAAG,CAAb;AACA,IAAMC,UAAU,GAAG,EAAnB;AACA,IAAIC,SAAS,GAAG,IAAhB;AACA,IAAIC,SAAS,GAAG,IAAhB,C,CAEA;;AACA,IAAMC,UAAU,GAAG,EAAnB,C,CAEA;;AACA,IAAMC,WAAW,GAAG,EAApB,C,CAEA;;AACAC,QAAQ,G,CAER;;AACA,IAAIC,EAAE,GAAGf,UAAU,GAAGH,IAAtB;AACA,IAAImB,EAAE,GAAGf,SAAS,GAAGJ,IAArB,C,CAEA;;AACA,IAAIoB,IAAI,GAAG,EAAX;;AACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,EAApB,EAAwBG,CAAC,EAAzB,EAA6B;AAC5B,MAAIC,EAAE,GAAG,EAAT;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,EAApB,EAAwBI,CAAC,EAAzB,EAA6B;AAC5BD,IAAAA,EAAE,CAACE,IAAH,CAAQ;AAAEC,MAAAA,CAAC,EAAE,CAAL;AAAQC,MAAAA,CAAC,EAAE,CAAX;AAAcC,MAAAA,CAAC,EAAE,CAAjB;AAAoBC,MAAAA,CAAC,EAAE,CAAvB;AAA0BC,MAAAA,CAAC,EAAE;AAA7B,KAAR;AACA;;AACDT,EAAAA,IAAI,CAACI,IAAL,CAAUF,EAAV;AACA,C,CAED;;;AACA,IAAIQ,IAAI,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAX;AACA,IAAIC,MAAM,GAAG;AACZN,EAAAA,CAAC,EAAE;AAAEO,IAAAA,CAAC,EAAE,CAAC,CAAN;AAASC,IAAAA,CAAC,EAAE,CAAZ;AAAeC,IAAAA,CAAC,EAAE;AAAlB,GADS;AAEZR,EAAAA,CAAC,EAAE;AAAEM,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE,CAAX;AAAcC,IAAAA,CAAC,EAAE;AAAjB,GAFS;AAGZP,EAAAA,CAAC,EAAE;AAAEK,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE,CAAC,CAAZ;AAAeC,IAAAA,CAAC,EAAE;AAAlB,GAHS;AAIZN,EAAAA,CAAC,EAAE;AAAEI,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE,CAAX;AAAcC,IAAAA,CAAC,EAAE;AAAjB;AAJS,CAAb,C,CAOA;;AACAC,OAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAP;AACAC,QAAQ,G,CAER;;AACA,IAAMC,QAAQ,GAAG/C,QAAQ,CAACgD,sBAAT,CAAgC,SAAhC,CAAjB;;AACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACG,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACzClC,EAAAA,KAAK,CAACmB,IAAN,CAAWa,QAAQ,CAACE,CAAD,CAAR,CAAYE,UAAvB;AACAnC,EAAAA,MAAM,CAACkB,IAAP,CAAYa,QAAQ,CAACE,CAAD,CAAR,CAAYE,UAAZ,GAAyBJ,QAAQ,CAACE,CAAD,CAAR,CAAYG,WAAjD;AACAnC,EAAAA,KAAK,CAACiB,IAAN,CAAWa,QAAQ,CAACE,CAAD,CAAR,CAAYI,SAAvB;AACAnC,EAAAA,MAAM,CAACgB,IAAP,CAAYa,QAAQ,CAACE,CAAD,CAAR,CAAYI,SAAZ,GAAwBN,QAAQ,CAACE,CAAD,CAAR,CAAYK,YAAhD;AACA,C,CACD;;;AAEAtD,QAAQ,CAACuD,gBAAT,CAA0B,SAA1B,EAAqCC,IAArC;;AAEA,SAASA,IAAT,CAAcC,CAAd,EAAiB;AAChB,MAAIC,IAAI,GAAGD,CAAC,CAACC,IAAb;;AACA,UAAQA,IAAR;AACC;AACA,SAAK,SAAL;AACCC,MAAAA,EAAE;AACF;;AACD,SAAK,WAAL;AACCC,MAAAA,IAAI;AACJ;;AACD,SAAK,WAAL;AACCC,MAAAA,IAAI;AACJ;;AACD,SAAK,YAAL;AACCC,MAAAA,KAAK;AACL;AACD;;AACA,SAAK,MAAL;AACCH,MAAAA,EAAE;AACF;;AACD,SAAK,MAAL;AACCC,MAAAA,IAAI;AACJ;;AACD,SAAK,MAAL;AACCC,MAAAA,IAAI;AACJ;;AACD,SAAK,MAAL;AACCC,MAAAA,KAAK;AACL;AA1BF;AA4BA;;AAEDxD,EAAE,CAACiD,gBAAH,CAAoB,OAApB,EAA6B,UAACE,CAAD,EAAO;AACnCE,EAAAA,EAAE;AACFpC,EAAAA,SAAS,GAAG,IAAZ;AACA,CAHD;AAIAhB,EAAE,CAACgD,gBAAH,CAAoB,OAApB,EAA6B,UAACE,CAAD,EAAO;AACnCG,EAAAA,IAAI;AACJrC,EAAAA,SAAS,GAAG,IAAZ;AACA,CAHD;AAIAf,EAAE,CAAC+C,gBAAH,CAAoB,OAApB,EAA6B,UAACE,CAAD,EAAO;AACnCI,EAAAA,IAAI;AACJtC,EAAAA,SAAS,GAAG,IAAZ;AACA,CAHD;AAIAd,EAAE,CAAC8C,gBAAH,CAAoB,OAApB,EAA6B,UAACE,CAAD,EAAO;AACnCK,EAAAA,KAAK;AACLvC,EAAAA,SAAS,GAAG,IAAZ;AACA,CAHD;;AAKA,SAASoC,EAAT,GAAc;AACbI,EAAAA,QAAQ,CAACzD,EAAD,CAAR;;AACA,MAAI0D,aAAa,CAAC,GAAD,CAAjB,EAAwB;AACvB7D,IAAAA,OAAO,CAAC8D,KAAR,CAAcC,GAAd,GAAoB/D,OAAO,CAACkD,SAAR,GAAoB3C,IAApB,GAA2B,IAA/C;AACAyD,IAAAA,SAAS,CAAC,KAAD,CAAT;AACA;AACD;;AAED,SAASP,IAAT,GAAgB;AACfG,EAAAA,QAAQ,CAACxD,EAAD,CAAR;;AACA,MAAIyD,aAAa,CAAC,GAAD,CAAjB,EAAwB;AACvB7D,IAAAA,OAAO,CAAC8D,KAAR,CAAcC,GAAd,GAAoB/D,OAAO,CAACkD,SAAR,GAAoB3C,IAApB,GAA2B,IAA/C;AACAyD,IAAAA,SAAS,CAAC,KAAD,CAAT;AACA;AACD;;AAED,SAASN,IAAT,GAAgB;AACfE,EAAAA,QAAQ,CAACvD,EAAD,CAAR;;AACA,MAAI4D,aAAa,CAAC,GAAD,CAAjB,EAAwB;AACvBjE,IAAAA,OAAO,CAAC8D,KAAR,CAAcJ,IAAd,GAAqB1D,OAAO,CAACgD,UAAR,GAAqBzC,IAArB,GAA4B,IAAjD;AACA;;AACDyD,EAAAA,SAAS,CAAC,IAAD,CAAT;AACA;;AAED,SAASL,KAAT,GAAiB;AAChBC,EAAAA,QAAQ,CAACtD,EAAD,CAAR;;AACA,MAAI2D,aAAa,CAAC,GAAD,CAAjB,EAAwB;AACvBjE,IAAAA,OAAO,CAAC8D,KAAR,CAAcJ,IAAd,GAAqB1D,OAAO,CAACgD,UAAR,GAAqBzC,IAArB,GAA4B,IAAjD;AACA;;AACDyD,EAAAA,SAAS,CAAC,IAAD,CAAT;AACA,C,CAED;;;AACA,SAASC,aAAT,CAAuBC,GAAvB,EAA4B;AAC3B,MAAI1B,CAAC,GAAGxC,OAAO,CAACgD,UAAhB;AACA,MAAIT,CAAC,GAAGvC,OAAO,CAACkD,SAAhB;AACA,MAAIiB,EAAE,GAAG,EAAT;AACA,MAAIC,GAAG,GAAGC,IAAI,CAACC,GAAL,CAAS1D,KAAK,CAACmC,MAAf,EAAuBlC,MAAM,CAACkC,MAA9B,EAAsCjC,KAAK,CAACiC,MAA5C,EAAoDhC,MAAM,CAACgC,MAA3D,CAAV;AAEA,MAAIwB,KAAK,GAAG,CAAZ;;AACA,OAAK,IAAI3C,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGwC,GAApB,EAAyBxC,EAAC,EAA1B,EAA8B;AAC7B2C,IAAAA,KAAK,GAAG,CAAR;;AACA,QAAIhC,CAAC,GAAGzB,KAAK,CAACc,EAAD,CAAT,IAAgBW,CAAC,GAAGxB,MAAM,CAACa,EAAD,CAAN,GAAYpB,IAApC,EAA0C;AACzC+D,MAAAA,KAAK,GAAG,CAAR;AACA;;AACD,QAAIL,GAAG,KAAK,GAAZ,EAAiB;AAChB,UAAI1B,CAAC,GAAG5B,KAAK,CAACgB,EAAD,CAAL,GAAWpB,IAAf,IAAuBgC,CAAC,GAAG3B,MAAM,CAACe,EAAD,CAAN,GAAYpB,IAA3C,EAAiD;AAChD+D,QAAAA,KAAK,GAAG,CAAR;AACA;AACD;;AACD,QAAIL,GAAG,KAAK,GAAZ,EAAiB;AAChB,UAAI1B,CAAC,GAAG5B,KAAK,CAACgB,EAAD,CAAT,IAAgBY,CAAC,GAAG3B,MAAM,CAACe,EAAD,CAA9B,EAAmC;AAClC2C,QAAAA,KAAK,GAAG,CAAR;AACA;AACD;;AACDJ,IAAAA,EAAE,CAACpC,IAAH,CAAQwC,KAAR;AACA,GAvB0B,CAwB3B;;;AACA,MAAIC,GAAG,GAAGL,EAAE,CAACM,KAAH,CAAS,UAAUnB,CAAV,EAAa;AAC/B,WAAOA,CAAC,GAAG,CAAX;AACA,GAFS,CAAV;AAGA,SAAOkB,GAAP;AACA,C,CAED;;;AACA,SAASX,aAAT,CAAuBK,GAAvB,EAA4B;AAC3B,MAAI1B,CAAC,GAAGxC,OAAO,CAACgD,UAAhB;AACA,MAAIT,CAAC,GAAGvC,OAAO,CAACkD,SAAhB;AACA,MAAIiB,EAAE,GAAG,EAAT;AACA,MAAIC,GAAG,GAAGC,IAAI,CAACC,GAAL,CAAS1D,KAAK,CAACmC,MAAf,EAAuBlC,MAAM,CAACkC,MAA9B,EAAsCjC,KAAK,CAACiC,MAA5C,EAAoDhC,MAAM,CAACgC,MAA3D,CAAV;AAEA,MAAIwB,KAAK,GAAG,CAAZ;;AACA,OAAK,IAAI3C,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGwC,GAApB,EAAyBxC,GAAC,EAA1B,EAA8B;AAC7B2C,IAAAA,KAAK,GAAG,CAAR;;AACA,QAAI/B,CAAC,GAAG5B,KAAK,CAACgB,GAAD,CAAT,IAAgBY,CAAC,GAAG3B,MAAM,CAACe,GAAD,CAAN,GAAYpB,IAApC,EAA0C;AACzC+D,MAAAA,KAAK,GAAG,CAAR;AACA;;AACD,QAAIL,GAAG,KAAK,GAAZ,EAAiB;AAChB,UAAI3B,CAAC,GAAGzB,KAAK,CAACc,GAAD,CAAT,IAAgBW,CAAC,GAAGxB,MAAM,CAACa,GAAD,CAA9B,EAAmC;AAClC2C,QAAAA,KAAK,GAAG,CAAR;AACA;AACD;;AACD,QAAIL,GAAG,KAAK,GAAZ,EAAiB;AAChB,UAAI3B,CAAC,GAAGzB,KAAK,CAACc,GAAD,CAAL,GAAWpB,IAAf,IAAuB+B,CAAC,GAAGxB,MAAM,CAACa,GAAD,CAAN,GAAYpB,IAA3C,EAAiD;AAChD+D,QAAAA,KAAK,GAAG,CAAR;AACA;AACD;;AACDJ,IAAAA,EAAE,CAACpC,IAAH,CAAQwC,KAAR;AACA,GAvB0B,CAwB3B;;;AACA,MAAIC,GAAG,GAAGL,EAAE,CAACM,KAAH,CAAS,UAAUnB,CAAV,EAAa;AAC/B,WAAOA,CAAC,GAAG,CAAX;AACA,GAFS,CAAV;AAGA,SAAOkB,GAAP;AACA,C,CAED;;;AACA,SAAShD,QAAT,GAAoB;AACnB,MAAI8C,GAAG,GAAG5D,UAAU,GAAGH,IAAvB;AACA,MAAImE,EAAE,GAAGL,IAAI,CAACM,KAAL,CAAWN,IAAI,CAACO,MAAL,KAAgBN,GAA3B,IAAkC/D,IAA3C,CAFmB,CAGnB;;AACA,MAAIsE,EAAE,GAAGnE,UAAU,GAAGH,IAAb,GAAoBmE,EAA7B,CAJmB,CAKnB;;AAEA,MAAII,GAAG,GAAGjF,QAAQ,CAACkF,aAAT,CAAuB,KAAvB,CAAV;AACAD,EAAAA,GAAG,CAAChB,KAAJ,CAAUC,GAAV,GAAgBxD,IAAI,GAAG,IAAvB;AACAuE,EAAAA,GAAG,CAAChB,KAAJ,CAAUJ,IAAV,GAAiBnD,IAAI,GAAG,IAAxB;AACAuE,EAAAA,GAAG,CAAChB,KAAJ,CAAUkB,MAAV,GAAmBN,EAAE,GAAG,IAAxB;AAEA,MAAIO,GAAG,GAAGpF,QAAQ,CAACkF,aAAT,CAAuB,KAAvB,CAAV;AACAE,EAAAA,GAAG,CAACnB,KAAJ,CAAUC,GAAV,GAAgBW,EAAE,GAAGnE,IAAI,GAAG,CAAZ,GAAgB,IAAhC;AACA0E,EAAAA,GAAG,CAACnB,KAAJ,CAAUJ,IAAV,GAAiBnD,IAAI,GAAG,IAAxB;AACA0E,EAAAA,GAAG,CAACnB,KAAJ,CAAUkB,MAAV,GAAmBH,EAAE,GAAG,IAAxB;AAEA,MAAIK,GAAG,GAAGrF,QAAQ,CAACkF,aAAT,CAAuB,KAAvB,CAAV;AACAG,EAAAA,GAAG,CAACpB,KAAJ,CAAUC,GAAV,GAAgBxD,IAAI,GAAG,IAAvB;AACA2E,EAAAA,GAAG,CAACpB,KAAJ,CAAUJ,IAAV,GAAiB/C,SAAS,GAAGJ,IAAZ,GAAmB,IAApC;AACA2E,EAAAA,GAAG,CAACpB,KAAJ,CAAUkB,MAAV,GAAmBH,EAAE,GAAG,IAAxB;AAEA,MAAIM,GAAG,GAAGtF,QAAQ,CAACkF,aAAT,CAAuB,KAAvB,CAAV;AACAI,EAAAA,GAAG,CAACrB,KAAJ,CAAUC,GAAV,GAAgBc,EAAE,GAAGtE,IAAI,GAAG,CAAZ,GAAgB,IAAhC;AACA4E,EAAAA,GAAG,CAACrB,KAAJ,CAAUJ,IAAV,GAAiB/C,SAAS,GAAGJ,IAAZ,GAAmB,IAApC;AACA4E,EAAAA,GAAG,CAACrB,KAAJ,CAAUkB,MAAV,GAAmBN,EAAE,GAAG,IAAxB,CAzBmB,CA2BnB;;AACA9D,EAAAA,KAAK,CAACmB,IAAN,CAAW,CAAX,EAAcpB,SAAS,GAAG,IAAIJ,IAA9B,EAAoC,CAApC,EAAuC,CAAvC,EAA0CI,SAAS,GAAGJ,IAAtD,EAA4DI,SAAS,GAAGJ,IAAxE;AACAM,EAAAA,MAAM,CAACkB,IAAP,CACC,IAAItB,MADL,EAECE,SAAS,GAAG,IAAIJ,IAAhB,GAAuBE,MAFxB,EAGCF,IAHD,EAICA,IAJD,EAKCI,SAAS,GAAG,IAAIJ,IALjB,EAMCI,SAAS,GAAG,IAAIJ,IANjB;AAQAO,EAAAA,KAAK,CAACiB,IAAN,CACC2C,EAAE,GAAGnE,IADN,EAECsE,EAAE,GAAGtE,IAFN,EAGCmE,EAAE,GAAGnE,IAHN,EAICmE,EAAE,GAAG,IAAInE,IAJV,EAKCsE,EAAE,GAAGtE,IALN,EAMCsE,EAAE,GAAG,IAAItE,IANV;AAQAQ,EAAAA,MAAM,CAACgB,IAAP,CACC2C,EAAE,GAAG,IAAInE,IADV,EAECsE,EAAE,GAAG,IAAItE,IAFV,EAGCmE,EAAE,GAAGnE,IAAL,GAAYE,MAHb,EAICiE,EAAE,GAAG,IAAInE,IAAT,GAAgBE,MAJjB,EAKCoE,EAAE,GAAGtE,IAAL,GAAYE,MALb,EAMCoE,EAAE,GAAG,IAAItE,IAAT,GAAgBE,MANjB,EA7CmB,CAqDnB;;AACAT,EAAAA,OAAO,CAAC8D,KAAR,CAAcC,GAAd,GAAoBW,EAAE,GAAGnE,IAAL,GAAY,IAAhC;AACAP,EAAAA,OAAO,CAAC8D,KAAR,CAAcJ,IAAd,GAAqB,IAAI,IAAzB,CAvDmB,CAwDnB;;AACAzD,EAAAA,IAAI,CAAC6D,KAAL,CAAWC,GAAX,GAAiBc,EAAE,GAAGtE,IAAL,GAAY,IAA7B;AACAN,EAAAA,IAAI,CAAC6D,KAAL,CAAWJ,IAAX,GAAkB/C,SAAS,GAAGJ,IAAZ,GAAmB,IAArC,CA1DmB,CA4DnB;;AACA,MAAI6E,GAAG,GAAG,CAACN,GAAD,EAAMG,GAAN,EAAWC,GAAX,EAAgBC,GAAhB,CAAV;;AACA,OAAK,IAAIvD,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGwD,GAAG,CAACrC,MAAxB,EAAgCnB,GAAC,EAAjC,EAAqC;AACpCyD,IAAAA,UAAU,CAACD,GAAG,CAACxD,GAAD,CAAJ,CAAV;AACA7B,IAAAA,IAAI,CAACuF,WAAL,CAAiBF,GAAG,CAACxD,GAAD,CAApB;AACA;AACD;;AAED,SAASyD,UAAT,CAAoBE,EAApB,EAAwB;AACvBA,EAAAA,EAAE,CAACC,YAAH,CAAgB,OAAhB,EAAyB,SAAzB;AACAD,EAAAA,EAAE,CAACzB,KAAH,CAAS2B,KAAT,GAAiBhF,MAAM,GAAG,IAA1B;AACA,C,CAED;;;AACA,SAASiC,OAAT,CAAiBgD,EAAjB,EAAqBC,EAArB,EAAyBC,CAAzB,EAA4B;AAC3B;AACA,MAAI3D,CAAC,GAAG4D,UAAU,CAACxD,IAAD,EAAOuD,CAAP,CAAlB;;AAEA,OAAK,IAAIhE,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGK,CAAC,CAACc,MAAtB,EAA8BnB,GAAC,EAA/B,EAAmC;AAClC,QAAIkE,EAAE,GAAGJ,EAAE,GAAGpD,MAAM,CAACL,CAAC,CAACL,GAAD,CAAF,CAAN,CAAaY,CAA3B;AACA,QAAIuD,EAAE,GAAGJ,EAAE,GAAGrD,MAAM,CAACL,CAAC,CAACL,GAAD,CAAF,CAAN,CAAaW,CAA3B;AACAZ,IAAAA,IAAI,CAACgE,EAAD,CAAJ,CAASD,EAAT,EAAatD,CAAb,GAAiB,CAAjB;;AAEA,QAAI0D,EAAE,IAAI,CAAN,IAAWA,EAAE,GAAGpE,EAAhB,IAAsBqE,EAAE,IAAI,CAA5B,IAAiCA,EAAE,GAAGtE,EAAtC,IAA4CE,IAAI,CAACoE,EAAD,CAAJ,CAASD,EAAT,EAAa1D,CAAb,KAAmB,CAAnE,EAAsE;AACrET,MAAAA,IAAI,CAACgE,EAAD,CAAJ,CAASD,EAAT,EAAazD,CAAC,CAACL,GAAD,CAAd,IAAqB,CAArB;AACAD,MAAAA,IAAI,CAACoE,EAAD,CAAJ,CAASD,EAAT,EAAaxD,MAAM,CAACL,CAAC,CAACL,GAAD,CAAF,CAAN,CAAaa,CAA1B,IAA+B,CAA/B,CAFqE,CAGrE;;AACAC,MAAAA,OAAO,CAACoD,EAAD,EAAKC,EAAL,EAASnE,GAAT,CAAP;AACA;AACD;AACD,C,CAED;;;AACA,SAASe,QAAT,GAAoB;AACnB,OAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,EAApB,EAAwBc,CAAC,EAAzB,EAA6B;AAC5B,SAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,EAApB,EAAwBc,CAAC,EAAzB,EAA6B;AAC5B,UAAIL,CAAC,GAAGP,IAAI,CAACY,CAAD,CAAJ,CAAQC,CAAR,EAAWN,CAAnB;AACA,UAAIC,CAAC,GAAGR,IAAI,CAACY,CAAD,CAAJ,CAAQC,CAAR,EAAWL,CAAnB;AACA,UAAIH,CAAC,GAAGL,IAAI,CAACY,CAAD,CAAJ,CAAQC,CAAR,EAAWR,CAAnB;AACA,UAAIC,CAAC,GAAGN,IAAI,CAACY,CAAD,CAAJ,CAAQC,CAAR,EAAWP,CAAnB;AAEA+D,MAAAA,SAAS,CAACxD,CAAD,EAAID,CAAJ,EAAOL,CAAP,EAAUC,CAAV,EAAaH,CAAb,EAAgBC,CAAhB,CAAT;AACA;AACD;AACD,C,CAED;;;AACA,SAAS+D,SAAT,CAAmBxD,CAAnB,EAAsBD,CAAtB,EAAyBL,CAAzB,EAA4BC,CAA5B,EAA+BH,CAA/B,EAAkCC,CAAlC,EAAqC;AACpC,MAAI8B,GAAG,GAAG,CAACxB,CAAC,GAAG,CAAL,IAAUhC,IAApB;AACA,MAAImD,IAAI,GAAG,CAAClB,CAAC,GAAG,CAAL,IAAUjC,IAArB;;AACA,MAAI2B,CAAC,KAAK,CAAN,IAAWM,CAAC,GAAG,CAAnB,EAAsB;AACrB,QAAI+C,EAAE,GAAG1F,QAAQ,CAACkF,aAAT,CAAuB,KAAvB,CAAT;AACAQ,IAAAA,EAAE,CAACzB,KAAH,CAASJ,IAAT,GAAgBA,IAAI,GAAG,IAAvB;AACA6B,IAAAA,EAAE,CAACzB,KAAH,CAASkB,MAAT,GAAkBzE,IAAI,GAAG,IAAzB;AACAgF,IAAAA,EAAE,CAACzB,KAAH,CAASC,GAAT,GAAeA,GAAG,GAAG,IAArB;AACAwB,IAAAA,EAAE,CAACC,YAAH,CAAgB,OAAhB,EAAyB,SAAzB;AACAD,IAAAA,EAAE,CAACzB,KAAH,CAAS2B,KAAT,GAAiBhF,MAAM,GAAG,IAA1B;AACAV,IAAAA,IAAI,CAACuF,WAAL,CAAiBC,EAAjB;AACA;;AAED,MAAItD,CAAC,KAAK,CAAN,IAAWM,CAAC,GAAGd,EAAE,GAAG,CAAxB,EAA2B;AAC1B,QAAI8D,GAAE,GAAG1F,QAAQ,CAACkF,aAAT,CAAuB,KAAvB,CAAT;;AACAQ,IAAAA,GAAE,CAACzB,KAAH,CAASJ,IAAT,GAAgBA,IAAI,GAAG,IAAvB;AACA6B,IAAAA,GAAE,CAACzB,KAAH,CAASkB,MAAT,GAAkBvE,MAAM,GAAG,IAA3B;AACA8E,IAAAA,GAAE,CAACzB,KAAH,CAASC,GAAT,GAAeA,GAAG,GAAGxD,IAAN,GAAa,IAA5B;;AACAgF,IAAAA,GAAE,CAACC,YAAH,CAAgB,OAAhB,EAAyB,SAAzB;;AACAD,IAAAA,GAAE,CAACzB,KAAH,CAAS2B,KAAT,GAAiBlF,IAAI,GAAGE,MAAP,GAAgB,IAAjC;AACAV,IAAAA,IAAI,CAACuF,WAAL,CAAiBC,GAAjB;AACA;AACD;;AAED,SAASM,UAAT,CAAoBI,KAApB,EAA2BL,CAA3B,EAA8B;AAC7B,MAAIM,GAAG,GAAGD,KAAK,CAACE,KAAN,CAAY,CAAZ,EAAeP,CAAf,CAAV;AACA,MAAIQ,GAAG,GAAGH,KAAK,CAACE,KAAN,CAAYP,CAAZ,EAAeK,KAAK,CAAClD,MAArB,CAAV;;AAEA,OAAK,IAAInB,GAAC,GAAGwE,GAAG,CAACrD,MAAJ,GAAa,CAA1B,EAA6BnB,GAAC,GAAG,CAAjC,EAAoCA,GAAC,EAArC,EAAyC;AACxC,QAAMyE,CAAC,GAAGhC,IAAI,CAACM,KAAL,CAAWN,IAAI,CAACO,MAAL,MAAiBhD,GAAC,GAAG,CAArB,CAAX,CAAV,CADwC,CAExC;;AAFwC,eAGrB,CAACwE,GAAG,CAACC,CAAD,CAAJ,EAASD,GAAG,CAACxE,GAAD,CAAZ,CAHqB;AAGvCwE,IAAAA,GAAG,CAACxE,GAAD,CAHoC;AAG/BwE,IAAAA,GAAG,CAACC,CAAD,CAH4B;AAIxC;;AACD,MAAIC,IAAI,GAAGJ,GAAG,CAACK,MAAJ,CAAWH,GAAX,CAAX;AACA,SAAOE,IAAP;AACA;;AAED,SAAS1C,QAAT,CAAkB4C,GAAlB,EAAuB;AACtB,MAAIA,GAAG,CAACC,EAAJ,KAAW,IAAf,EAAqB;AACpBD,IAAAA,GAAG,CAAC1C,KAAJ,CAAU4C,MAAV,GAAmB,gBAAnB;AACAF,IAAAA,GAAG,CAAC1C,KAAJ,CAAU6C,SAAV,GAAsB,gBAAtB;AACAH,IAAAA,GAAG,CAAC1C,KAAJ,CAAU8C,YAAV,GAAyB,gBAAzB;AACAJ,IAAAA,GAAG,CAAC1C,KAAJ,CAAU+C,SAAV,GAAsB,kBAAtB;AACA;;AACD,MAAIL,GAAG,CAACC,EAAJ,KAAW,IAAf,EAAqB;AACpBD,IAAAA,GAAG,CAAC1C,KAAJ,CAAU4C,MAAV,GAAmB,gBAAnB;AACAF,IAAAA,GAAG,CAAC1C,KAAJ,CAAU8C,YAAV,GAAyB,gBAAzB;AACAJ,IAAAA,GAAG,CAAC1C,KAAJ,CAAU6C,SAAV,GAAsB,gBAAtB;AACAH,IAAAA,GAAG,CAAC1C,KAAJ,CAAU+C,SAAV,GAAsB,iBAAtB;AACA;;AACD,MAAIL,GAAG,CAACC,EAAJ,KAAW,IAAf,EAAqB;AACpBD,IAAAA,GAAG,CAAC1C,KAAJ,CAAU4C,MAAV,GAAmB,gBAAnB;AACAF,IAAAA,GAAG,CAAC1C,KAAJ,CAAUgD,UAAV,GAAuB,gBAAvB;AACAN,IAAAA,GAAG,CAAC1C,KAAJ,CAAUiD,WAAV,GAAwB,gBAAxB;AACAP,IAAAA,GAAG,CAAC1C,KAAJ,CAAU+C,SAAV,GAAsB,kBAAtB;AACA;;AACD,MAAIL,GAAG,CAACC,EAAJ,KAAW,IAAf,EAAqB;AACpBD,IAAAA,GAAG,CAAC1C,KAAJ,CAAU4C,MAAV,GAAmB,gBAAnB;AACAF,IAAAA,GAAG,CAAC1C,KAAJ,CAAUiD,WAAV,GAAwB,gBAAxB;AACAP,IAAAA,GAAG,CAAC1C,KAAJ,CAAUgD,UAAV,GAAuB,gBAAvB;AACAN,IAAAA,GAAG,CAAC1C,KAAJ,CAAU+C,SAAV,GAAsB,iBAAtB;AACA,GAxBqB,CA0BtB;;;AACAG,EAAAA,UAAU,CAAC,YAAM;AAChBR,IAAAA,GAAG,CAAC1C,KAAJ,CAAU4C,MAAV,GAAmB,gBAAnB;AACAF,IAAAA,GAAG,CAAC1C,KAAJ,CAAU6C,SAAV,GAAsB,gBAAtB;AACAH,IAAAA,GAAG,CAAC1C,KAAJ,CAAU8C,YAAV,GAAyB,gBAAzB;AACAJ,IAAAA,GAAG,CAAC1C,KAAJ,CAAUgD,UAAV,GAAuB,gBAAvB;AACAN,IAAAA,GAAG,CAAC1C,KAAJ,CAAUiD,WAAV,GAAwB,gBAAxB;AACAP,IAAAA,GAAG,CAAC1C,KAAJ,CAAU+C,SAAV,GAAsB,iBAAtB;AACAL,IAAAA,GAAG,CAAC1C,KAAJ,CAAU+C,SAAV,GAAsB,iBAAtB;AACA,GARS,EAQP,KARO,CAAV;AASA;;AAED,IAAII,IAAI,GAAG,CAAX;AACA,IAAIC,KAAK,GAAG,CAAZ;;AACA,SAASlD,SAAT,CAAmBmD,EAAnB,EAAuB;AACtB;AACA,MAAIA,EAAJ,EAAQ;AACP,QAAInH,OAAO,CAACgD,UAAR,GAAqBiE,IAAzB,EAA+B;AAC9B/G,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA;;AACD,QAAIpH,OAAO,CAACgD,UAAR,GAAqBiE,IAAI,GAAG,IAAI1G,IAApC,EAA0C;AACzCL,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA;;AACD,QAAIpH,OAAO,CAACgD,UAAR,GAAqBiE,IAAI,GAAG,IAAI1G,IAApC,EAA0C;AACzCL,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA;;AACD,QAAIpH,OAAO,CAACgD,UAAR,GAAqBiE,IAAI,GAAG,IAAI1G,IAApC,EAA0C;AACzCL,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA;;AACD,QAAIpH,OAAO,CAACgD,UAAR,GAAqBkE,KAAzB,EAAgC;AAC/BhH,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA;;AACD,QAAIpH,OAAO,CAACgD,UAAR,IAAsBiE,IAA1B,EAAgC;AAC/B,UAAIjH,OAAO,CAACgD,UAAR,GAAqBrC,SAAS,GAAG,GAArC,EAA0C;AACzCT,QAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA,OAFD,MAEO;AACNlH,QAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA;;AACDH,MAAAA,IAAI,GAAGjH,OAAO,CAACgD,UAAf;AACA;;AACD,QAAIhD,OAAO,CAACgD,UAAR,KAAuB,CAA3B,EAA8B;AAC7B9C,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA;;AACD,QACCpH,OAAO,CAACgD,UAAR,GAAqBrC,SAAS,GAAGJ,IAAjC,IACAP,OAAO,CAACkD,SAAR,KAAsBjD,IAAI,CAACiD,SAF5B,EAGE;AACDhD,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACAnH,MAAAA,IAAI,CAACmH,SAAL,GAAiB,IAAjB;AACA;;AACD,QAAIpH,OAAO,CAACgD,UAAR,GAAqBrC,SAAzB,EAAoC;AACnCT,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,EAAhB;AACAnH,MAAAA,IAAI,CAACmH,SAAL,GAAiB,IAAjB;AACA;;AACDF,IAAAA,KAAK,GAAGlH,OAAO,CAACgD,UAAhB;AACA,GAvCD,MAuCO;AACN,QAAIhD,OAAO,CAACgD,UAAR,GAAsBrC,SAAS,GAAGJ,IAAlC,IAA2CP,OAAO,CAACkD,SAAR,KAAsBjD,IAAI,CAACiD,SAA1E,EAAqF;AACpFhD,MAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA,KAFD,MAEK;AACJ,UAAGpH,OAAO,CAACgD,UAAR,GAAsBrC,SAAS,GAAGJ,IAAlC,IAA2CP,OAAO,CAACkD,SAAR,IAAqBjD,IAAI,CAACoH,QAAxE,EAAiF;AAChFnH,QAAAA,GAAG,CAACkH,SAAJ,GAAgB,IAAhB;AACA;AACD;AACD,GAjDqB,CAmDtB;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,C,CAED;;;AACAE,MAAM,CAAClE,gBAAP,CAAwB,mBAAxB,EAA6CmE,iBAA7C;;AAEA,SAASC,SAAT,GAAqB;AACpBnG,EAAAA,SAAS,GAAG,KAAZ;AACA2F,EAAAA,UAAU,CAAC,YAAM;AAChB3F,IAAAA,SAAS,GAAG,IAAZ;AACA,GAFS,EAEP,KAFO,CAAV;AAGA;;AAED,SAASkG,iBAAT,CAA2BjE,CAA3B,EAA8B;AAC7B;AACA;AAEA,MAAIlC,SAAJ,EAAe;AACdH,IAAAA,MAAM,GAAGqC,CAAC,CAACmE,IAAX;AACAvG,IAAAA,MAAM,GAAGoC,CAAC,CAACoE,KAAX;AACAtG,IAAAA,SAAS,GAAG,KAAZ;AACA;;AACD,MAAIC,SAAJ,EAAe;AACd,QAAIiC,CAAC,CAACmE,IAAF,GAASxG,MAAM,GAAGE,UAAtB,EAAkC;AACjCqC,MAAAA,EAAE;AACFgE,MAAAA,SAAS;AACT;;AACD,QAAIlE,CAAC,CAACmE,IAAF,GAASxG,MAAM,GAAGE,UAAtB,EAAkC;AACjCsC,MAAAA,IAAI;AACJ+D,MAAAA,SAAS;AACT;;AACD,QAAIlE,CAAC,CAACoE,KAAF,GAAUxG,MAAM,GAAGC,UAAvB,EAAmC;AAClCuC,MAAAA,IAAI;AACJ8D,MAAAA,SAAS;AACT;;AACD,QAAIlE,CAAC,CAACoE,KAAF,GAAUxG,MAAM,GAAGC,UAAvB,EAAmC;AAClCwC,MAAAA,KAAK;AACL6D,MAAAA,SAAS;AACT;AACD;AACD,C,CAED;;;AACA,IAAIG,UAAU,GAAG,wBAAwBL,MAAzC;AACA,IAAIM,EAAE,GAAG,EAAT;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,MAAM,GAAG,IAAb;AAEA,IAAIC,OAAO,GAAG,IAAd;AACA,IAAIC,OAAO,GAAG,IAAd;AACA,IAAIC,OAAO,GAAG,IAAd;AACA,IAAIC,OAAO,GAAG,IAAd;AAEAd,MAAM,CAAClE,gBAAP,CAAwB,kBAAxB,EAA4CiF,cAA5C;AACAf,MAAM,CAAClE,gBAAP,CAAwB,qBAAxB,EAA+CkF,iBAA/C;;AAEA,SAASA,iBAAT,GAA6B;AAC5BV,EAAAA,EAAE,GAAG,EAAL;AACA;;AAED,SAASS,cAAT,CAAwB/E,CAAxB,EAA2B;AAC1BiF,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAZ,EAAAA,EAAE,CAAC,CAAD,CAAF,GAAQtE,CAAC,CAACmF,OAAV;AACAC,EAAAA,qBAAqB,CAACC,YAAD,CAArB;AACA;;AAED,SAASA,YAAT,GAAwB;AACvB,MAAI,CAAChB,UAAL,EAAiB;AAChBiB,IAAAA,YAAY;AACZ;;AAED,OAAK,IAAIhH,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGgG,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc9F,MAAlC,EAA0CnB,GAAC,EAA3C,EAA+C;AAC9C;AACA,QAAIgG,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc,EAAd,EAAkBC,OAAtB,EAA+B;AAC9B,UAAIjB,MAAJ,EAAY;AACXrE,QAAAA,EAAE;AACFuF,QAAAA,OAAO,CAAC,GAAD,CAAP;AACA;AACD;;AACD,QAAInB,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc,EAAd,EAAkBC,OAAlB,KAA8B,KAAlC,EAAyC;AACxCjB,MAAAA,MAAM,GAAG,IAAT;AACA,KAV6C,CAY9C;;;AACA,QAAID,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc,EAAd,EAAkBC,OAAtB,EAA+B;AAC9B,UAAIhB,MAAJ,EAAY;AACXrE,QAAAA,IAAI;AACJsF,QAAAA,OAAO,CAAC,GAAD,CAAP;AACA;AACD;;AACD,QAAInB,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc,EAAd,EAAkBC,OAAlB,KAA8B,KAAlC,EAAyC;AACxChB,MAAAA,MAAM,GAAG,IAAT;AACA,KArB6C,CAuB9C;;;AACA,QAAIF,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc,EAAd,EAAkBC,OAAtB,EAA+B;AAC9B,UAAIf,MAAJ,EAAY;AACXrE,QAAAA,IAAI;AACJqF,QAAAA,OAAO,CAAC,GAAD,CAAP;AACA;AACD;;AACD,QAAInB,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc,EAAd,EAAkBC,OAAlB,KAA8B,KAAlC,EAAyC;AACxCf,MAAAA,MAAM,GAAG,IAAT;AACA,KAhC6C,CAkC9C;;;AACA,QAAIH,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc,EAAd,EAAkBC,OAAtB,EAA+B;AAC9B,UAAId,MAAJ,EAAY;AACXrE,QAAAA,KAAK;AACLoF,QAAAA,OAAO,CAAC,GAAD,CAAP;AACA;AACD;;AACD,QAAInB,EAAE,CAAC,CAAD,CAAF,CAAMiB,OAAN,CAAc,EAAd,EAAkBC,OAAlB,KAA8B,KAAlC,EAAyC;AACxCd,MAAAA,MAAM,GAAG,IAAT;AACA;AACD;;AAED,OAAK,IAAI3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAWjG,MAA/B,EAAuCsD,CAAC,EAAxC,EAA4C;AAC3C;AACA,QAAIuB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAW,CAAX,IAAgB,CAAC,GAAjB,IAAwBpB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAW,CAAX,IAAgB,CAAC,GAA7C,EAAkD;AACjD,UAAIf,OAAJ,EAAa;AACZzE,QAAAA,EAAE;AACFyF,QAAAA,QAAQ,CAAC,GAAD,CAAR;AACA;AACD;;AACD,QAAIrB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAW,CAAX,IAAgB,GAAhB,IAAuBpB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAW,CAAX,IAAgB,GAA3C,EAAgD;AAC/C,UAAId,OAAJ,EAAa;AACZzE,QAAAA,IAAI;AACJwF,QAAAA,QAAQ,CAAC,GAAD,CAAR;AACA;AACD;;AACD,QAAIrB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAW,CAAX,IAAgB,CAAC,GAAjB,IAAwBpB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAW,CAAX,IAAgB,CAAC,GAA7C,EAAkD;AACjD,UAAIb,OAAJ,EAAa;AACZzE,QAAAA,IAAI;AACJuF,QAAAA,QAAQ,CAAC,GAAD,CAAR;AACA;AACD;;AACD,QAAIrB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAW,CAAX,IAAgB,GAAhB,IAAuBpB,EAAE,CAAC,CAAD,CAAF,CAAMoB,IAAN,CAAW,CAAX,IAAgB,GAA3C,EAAgD;AAC/C,UAAIZ,OAAJ,EAAa;AACZzE,QAAAA,KAAK;AACLsF,QAAAA,QAAQ,CAAC,GAAD,CAAR;AACA;AACD;AACD;;AAEDP,EAAAA,qBAAqB,CAACC,YAAD,CAArB;AACA;;AAED,SAASC,YAAT,GAAwB;AACvB,MAAIM,QAAQ,GAAGC,SAAS,CAACC,WAAV,GACZD,SAAS,CAACC,WAAV,EADY,GAEZD,SAAS,CAACE,iBAAV,GACAF,SAAS,CAACE,iBAAV,EADA,GAEA,EAJH;;AAKA,OAAK,IAAIzH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsH,QAAQ,CAACnG,MAA7B,EAAqCnB,CAAC,EAAtC,EAA0C;AACzC,QAAIsH,QAAQ,CAACtH,CAAD,CAAZ,EAAiB;AAChB,UAAIsH,QAAQ,CAACtH,CAAD,CAAR,CAAY0H,KAAZ,IAAqB1B,EAAzB,EAA6B;AAC5BA,QAAAA,EAAE,CAACsB,QAAQ,CAACtH,CAAD,CAAR,CAAY0H,KAAb,CAAF,GAAwBJ,QAAQ,CAACtH,CAAD,CAAhC;AACA,OAFD,MAEO;AACN2H,QAAAA,UAAU,CAACL,QAAQ,CAACtH,CAAD,CAAT,CAAV;AACA;AACD;AACD;AACD;;AAED,IAAI,CAAC+F,UAAL,EAAiB;AAChB6B,EAAAA,WAAW,CAACZ,YAAD,EAAe,GAAf,CAAX;AACA;;AAED,SAASG,OAAT,CAAiBU,IAAjB,EAAuB;AACtB,UAAQA,IAAR;AACC,SAAK,GAAL;AACC5B,MAAAA,MAAM,GAAG,KAAT;AACA;;AAED,SAAK,GAAL;AACCC,MAAAA,MAAM,GAAG,KAAT;AACA;;AAED,SAAK,GAAL;AACCC,MAAAA,MAAM,GAAG,KAAT;AACA;;AAED,SAAK,GAAL;AACCC,MAAAA,MAAM,GAAG,KAAT;AACA;AAfF;;AAkBAhB,EAAAA,UAAU,CAAC,YAAM;AAChBa,IAAAA,MAAM,GAAG,IAAT;AACAC,IAAAA,MAAM,GAAG,IAAT;AACAC,IAAAA,MAAM,GAAG,IAAT;AACAC,IAAAA,MAAM,GAAG,IAAT;AACA,GALS,EAKP,KALO,CAAV;AAMA;;AAED,SAASiB,QAAT,CAAkBQ,IAAlB,EAAwB;AACvB,UAAQA,IAAR;AACC,SAAK,GAAL;AACCxB,MAAAA,OAAO,GAAG,KAAV;AACA;;AAED,SAAK,GAAL;AACCC,MAAAA,OAAO,GAAG,KAAV;AACA;;AAED,SAAK,GAAL;AACCC,MAAAA,OAAO,GAAG,KAAV;AACA;;AAED,SAAK,GAAL;AACCC,MAAAA,OAAO,GAAG,KAAV;AACA;AAfF;;AAkBApB,EAAAA,UAAU,CAAC,YAAM;AAChBiB,IAAAA,OAAO,GAAG,IAAV;AACAC,IAAAA,OAAO,GAAG,IAAV;AACAC,IAAAA,OAAO,GAAG,IAAV;AACAC,IAAAA,OAAO,GAAG,IAAV;AACA,GALS,EAKP,KALO,CAAV;AAMA,C,CAID;;;AACA,IAAIsB,WAAW,GAAG,CAAlB;AACA,IAAIC,WAAW,GAAG,CAAlB;AACA/J,IAAI,CAACwD,gBAAL,CAAsB,YAAtB,EAAoC,UAACE,CAAD,EAAO;AAC1CoG,EAAAA,WAAW,GAAGpG,CAAC,CAACsG,cAAF,CAAiB,CAAjB,EAAoBC,KAAlC;AACAF,EAAAA,WAAW,GAAGrG,CAAC,CAACsG,cAAF,CAAiB,CAAjB,EAAoBE,KAAlC;AACA,CAHD;AAKAlK,IAAI,CAACwD,gBAAL,CAAsB,WAAtB,EAAmC,UAACE,CAAD,EAAO;AACzCA,EAAAA,CAAC,CAACyG,cAAF,GADyC,CAEzC;;AACA,MAAIC,KAAK,GAAG1G,CAAC,CAACsG,cAAF,CAAiB,CAAjB,EAAoBC,KAApB,GAA4BH,WAAxC;AACA,MAAIO,KAAK,GAAG3G,CAAC,CAACsG,cAAF,CAAiB,CAAjB,EAAoBE,KAApB,GAA4BH,WAAxC;;AACA,MAAIK,KAAK,GAAG1I,UAAZ,EAAwB;AACvBmC,IAAAA,IAAI;AACJiG,IAAAA,WAAW,GAAGpG,CAAC,CAACsG,cAAF,CAAiB,CAAjB,EAAoBC,KAAlC;AACA,GAHD,MAGO;AACN,QAAIG,KAAK,GAAG,CAAC,CAAD,GAAK1I,UAAjB,EAA6B;AAC5BkC,MAAAA,EAAE;AACFkG,MAAAA,WAAW,GAAGpG,CAAC,CAACsG,cAAF,CAAiB,CAAjB,EAAoBC,KAAlC;AACA;AACD;;AACD,MAAII,KAAK,GAAG3I,UAAZ,EAAwB;AACvBqC,IAAAA,KAAK;AACLgG,IAAAA,WAAW,GAAGrG,CAAC,CAACsG,cAAF,CAAiB,CAAjB,EAAoBE,KAAlC;AACA,GAHD,MAGO;AACN,QAAIG,KAAK,GAAG,CAAC,CAAD,GAAK3I,UAAjB,EAA6B;AAC5BoC,MAAAA,IAAI;AACJiG,MAAAA,WAAW,GAAGrG,CAAC,CAACsG,cAAF,CAAiB,CAAjB,EAAoBE,KAAlC;AACA;AACD;AACD,CAvBD,E,CAyBA;;AACA,IAAII,YAAY,GAAG,CAAnB;AACA,IAAIC,YAAY,GAAG,CAAnB;AACAvK,IAAI,CAACwD,gBAAL,CAAsB,OAAtB,EAA+B,UAACE,CAAD,EAAO;AACrC;AAEA;AACA4G,EAAAA,YAAY,GAAGA,YAAY,GAAG5G,CAAC,CAAC8G,MAAhC;;AACA,MAAIF,YAAY,GAAG,CAAf,IAAoB5G,CAAC,CAAC8G,MAAF,GAAW,CAAnC,EAAsC;AACrCF,IAAAA,YAAY,GAAG,CAAf;AACA;;AACD,MAAIA,YAAY,GAAG,CAAf,IAAoB5G,CAAC,CAAC8G,MAAF,GAAW,CAAnC,EAAsC;AACrCF,IAAAA,YAAY,GAAG,CAAf;AACA;;AAED,MAAIA,YAAY,GAAG3I,WAAnB,EAAgC;AAC/BiC,IAAAA,EAAE;AACF0G,IAAAA,YAAY,GAAG,CAAf;AACA;;AACA,MAAIA,YAAY,GAAI,CAAC,CAAD,GAAK3I,WAAzB,EAAuC;AACvCkC,IAAAA,IAAI;AACJyG,IAAAA,YAAY,GAAG,CAAf;AACA,GAnBoC,CAqBrC;;;AACAC,EAAAA,YAAY,GAAGA,YAAY,GAAG7G,CAAC,CAAC+G,MAAhC;;AACA,MAAIF,YAAY,GAAG,CAAf,IAAoB7G,CAAC,CAAC+G,MAAF,GAAW,CAAnC,EAAsC;AACrCF,IAAAA,YAAY,GAAG,CAAf;AACA;;AACD,MAAIA,YAAY,GAAG,CAAf,IAAoB7G,CAAC,CAAC+G,MAAF,GAAW,CAAnC,EAAsC;AACrCF,IAAAA,YAAY,GAAG,CAAf;AACA;;AAED,MAAIA,YAAY,GAAG5I,WAAnB,EAAgC;AAC/BmC,IAAAA,IAAI;AACJyG,IAAAA,YAAY,GAAG,CAAf;AACA;;AACA,MAAIA,YAAY,GAAI,CAAC,CAAD,GAAK5I,WAAzB,EAAuC;AACvCoC,IAAAA,KAAK;AACLwG,IAAAA,YAAY,GAAG,CAAf;AACA;AACD,CAtCD","sourcesContent":["const cont = document.getElementById(\"container\");\r\nconst maze = document.getElementById(\"maze\");\r\nconst thingie = document.getElementById(\"thingie\");\r\nconst home = document.getElementById(\"home\");\r\nconst emo = document.getElementById(\"emo\");\r\n\r\nconst bu = document.getElementById(\"bu\");\r\nconst bd = document.getElementById(\"bd\");\r\nconst bl = document.getElementById(\"bl\");\r\nconst br = document.getElementById(\"br\");\r\n\r\nconst step = 20;\r\nconst size = 20;\r\nconst bwidth = 2;\r\nconst mazeHeight = 200;\r\nconst mazeWidth = 300;\r\nlet nogoX = [];\r\nlet nogoX2 = [];\r\nlet nogoY = [];\r\nlet nogoY2 = [];\r\nlet prevDist = mazeWidth * 2;\r\n\r\n//tilt vars\r\nlet lastUD = 0;\r\nlet lastLR = 0;\r\nconst mThreshold = 15;\r\nlet firstMove = true;\r\nlet allowTilt = true;\r\n\r\n//swipe vars\r\nconst sThreshold = 15;\r\n\r\n//scroll vars\r\nconst scThreshold = 20;\r\n\r\n//generate sides and starting position\r\ngenSides();\r\n\r\n//define size\r\nlet my = mazeHeight / step;\r\nlet mx = mazeWidth / step;\r\n\r\n//create full grid\r\nlet grid = [];\r\nfor (let i = 0; i < my; i++) {\r\n\tlet sg = [];\r\n\tfor (let a = 0; a < mx; a++) {\r\n\t\tsg.push({ u: 0, d: 0, l: 0, r: 0, v: 0 });\r\n\t}\r\n\tgrid.push(sg);\r\n}\r\n\r\n//create direction arrays\r\nlet dirs = [\"u\", \"d\", \"l\", \"r\"];\r\nlet modDir = {\r\n\tu: { y: -1, x: 0, o: \"d\" },\r\n\td: { y: 1, x: 0, o: \"u\" },\r\n\tl: { y: 0, x: -1, o: \"r\" },\r\n\tr: { y: 0, x: 1, o: \"l\" }\r\n};\r\n\r\n//generate maze\r\ngenMaze(0, 0, 0);\r\ndrawMaze();\r\n\r\n//get all the barriers\r\nconst barriers = document.getElementsByClassName(\"barrier\");\r\nfor (let b = 0; b < barriers.length; b++) {\r\n\tnogoX.push(barriers[b].offsetLeft);\r\n\tnogoX2.push(barriers[b].offsetLeft + barriers[b].clientWidth);\r\n\tnogoY.push(barriers[b].offsetTop);\r\n\tnogoY2.push(barriers[b].offsetTop + barriers[b].clientHeight);\r\n}\r\n//console.log(nogoX, nogoX2, nogoY, nogoY2);\r\n\r\ndocument.addEventListener(\"keydown\", keys);\r\n\r\nfunction keys(e) {\r\n\tlet code = e.code;\r\n\tswitch (code) {\r\n\t\t//arrows\r\n\t\tcase \"ArrowUp\":\r\n\t\t\tup();\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowDown\":\r\n\t\t\tdown();\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowLeft\":\r\n\t\t\tleft();\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowRight\":\r\n\t\t\tright();\r\n\t\t\tbreak;\r\n\t\t//wasd\r\n\t\tcase \"KeyW\":\r\n\t\t\tup();\r\n\t\t\tbreak;\r\n\t\tcase \"KeyS\":\r\n\t\t\tdown();\r\n\t\t\tbreak;\r\n\t\tcase \"KeyA\":\r\n\t\t\tleft();\r\n\t\t\tbreak;\r\n\t\tcase \"KeyD\":\r\n\t\t\tright();\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\nbu.addEventListener(\"click\", (e) => {\r\n\tup();\r\n\tfirstMove = true;\r\n});\r\nbd.addEventListener(\"click\", (e) => {\r\n\tdown();\r\n\tfirstMove = true;\r\n});\r\nbl.addEventListener(\"click\", (e) => {\r\n\tleft();\r\n\tfirstMove = true;\r\n});\r\nbr.addEventListener(\"click\", (e) => {\r\n\tright();\r\n\tfirstMove = true;\r\n});\r\n\r\nfunction up() {\r\n\tanimKeys(bu);\r\n\tif (checkYboundry(\"u\")) {\r\n\t\tthingie.style.top = thingie.offsetTop - step + \"px\";\r\n\t\tupdateEmo(false);\r\n\t}\r\n}\r\n\r\nfunction down() {\r\n\tanimKeys(bd);\r\n\tif (checkYboundry(\"d\")) {\r\n\t\tthingie.style.top = thingie.offsetTop + step + \"px\";\r\n\t\tupdateEmo(false);\r\n\t}\r\n}\r\n\r\nfunction left() {\r\n\tanimKeys(bl);\r\n\tif (checkXboundry(\"l\")) {\r\n\t\tthingie.style.left = thingie.offsetLeft - step + \"px\";\r\n\t}\r\n\tupdateEmo(true);\r\n}\r\n\r\nfunction right() {\r\n\tanimKeys(br);\r\n\tif (checkXboundry(\"r\")) {\r\n\t\tthingie.style.left = thingie.offsetLeft + step + \"px\";\r\n\t}\r\n\tupdateEmo(true);\r\n}\r\n\r\n//check if one can move horizontally\r\nfunction checkXboundry(dir) {\r\n\tlet x = thingie.offsetLeft;\r\n\tlet y = thingie.offsetTop;\r\n\tlet ok = [];\r\n\tlet len = Math.max(nogoX.length, nogoX2.length, nogoY.length, nogoY2.length);\r\n\r\n\tlet check = 0;\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tcheck = 0;\r\n\t\tif (y < nogoY[i] || y > nogoY2[i] - size) {\r\n\t\t\tcheck = 1;\r\n\t\t}\r\n\t\tif (dir === \"r\") {\r\n\t\t\tif (x < nogoX[i] - size || x > nogoX2[i] - size) {\r\n\t\t\t\tcheck = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (dir === \"l\") {\r\n\t\t\tif (x < nogoX[i] || x > nogoX2[i]) {\r\n\t\t\t\tcheck = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tok.push(check);\r\n\t}\r\n\t//check what to return\r\n\tlet res = ok.every(function (e) {\r\n\t\treturn e > 0;\r\n\t});\r\n\treturn res;\r\n}\r\n\r\n//check if one can move vertically\r\nfunction checkYboundry(dir) {\r\n\tlet x = thingie.offsetLeft;\r\n\tlet y = thingie.offsetTop;\r\n\tlet ok = [];\r\n\tlet len = Math.max(nogoX.length, nogoX2.length, nogoY.length, nogoY2.length);\r\n\r\n\tlet check = 0;\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tcheck = 0;\r\n\t\tif (x < nogoX[i] || x > nogoX2[i] - size) {\r\n\t\t\tcheck = 1;\r\n\t\t}\r\n\t\tif (dir === \"u\") {\r\n\t\t\tif (y < nogoY[i] || y > nogoY2[i]) {\r\n\t\t\t\tcheck = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (dir === \"d\") {\r\n\t\t\tif (y < nogoY[i] - size || y > nogoY2[i] - size) {\r\n\t\t\t\tcheck = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tok.push(check);\r\n\t}\r\n\t//check what to return\r\n\tlet res = ok.every(function (e) {\r\n\t\treturn e > 0;\r\n\t});\r\n\treturn res;\r\n}\r\n\r\n//generate sides with random entry and exit points\r\nfunction genSides() {\r\n\tlet max = mazeHeight / step;\r\n\tlet l1 = Math.floor(Math.random() * max) * step;\r\n\t//let l1 = 0;\r\n\tlet l2 = mazeHeight - step - l1;\r\n\t//console.log(l1, l2);\r\n\r\n\tlet lb1 = document.createElement(\"div\");\r\n\tlb1.style.top = step + \"px\";\r\n\tlb1.style.left = step + \"px\";\r\n\tlb1.style.height = l1 + \"px\";\r\n\r\n\tlet lb2 = document.createElement(\"div\");\r\n\tlb2.style.top = l1 + step * 2 + \"px\";\r\n\tlb2.style.left = step + \"px\";\r\n\tlb2.style.height = l2 + \"px\";\r\n\r\n\tlet rb1 = document.createElement(\"div\");\r\n\trb1.style.top = step + \"px\";\r\n\trb1.style.left = mazeWidth + step + \"px\";\r\n\trb1.style.height = l2 + \"px\";\r\n\r\n\tlet rb2 = document.createElement(\"div\");\r\n\trb2.style.top = l2 + step * 2 + \"px\";\r\n\trb2.style.left = mazeWidth + step + \"px\";\r\n\trb2.style.height = l1 + \"px\";\r\n\r\n\t//create invisible barriers for start and end: vertical left, vertical right, left top, left bottom, right top, right bottom\r\n\tnogoX.push(0, mazeWidth + 2 * step, 0, 0, mazeWidth + step, mazeWidth + step);\r\n\tnogoX2.push(\r\n\t\t0 + bwidth,\r\n\t\tmazeWidth + 2 * step + bwidth,\r\n\t\tstep,\r\n\t\tstep,\r\n\t\tmazeWidth + 2 * step,\r\n\t\tmazeWidth + 2 * step\r\n\t);\r\n\tnogoY.push(\r\n\t\tl1 + step,\r\n\t\tl2 + step,\r\n\t\tl1 + step,\r\n\t\tl1 + 2 * step,\r\n\t\tl2 + step,\r\n\t\tl2 + 2 * step\r\n\t);\r\n\tnogoY2.push(\r\n\t\tl1 + 2 * step,\r\n\t\tl2 + 2 * step,\r\n\t\tl1 + step + bwidth,\r\n\t\tl1 + 2 * step + bwidth,\r\n\t\tl2 + step + bwidth,\r\n\t\tl2 + 2 * step + bwidth\r\n\t);\r\n\t//set start-pos\r\n\tthingie.style.top = l1 + step + \"px\";\r\n\tthingie.style.left = 0 + \"px\";\r\n\t//set end-pos & store height of end\r\n\thome.style.top = l2 + step + \"px\";\r\n\thome.style.left = mazeWidth + step + \"px\";\r\n\r\n\t//style & append\r\n\tlet els = [lb1, lb2, rb1, rb2];\r\n\tfor (let i = 0; i < els.length; i++) {\r\n\t\tconfSideEl(els[i]);\r\n\t\tmaze.appendChild(els[i]);\r\n\t}\r\n}\r\n\r\nfunction confSideEl(el) {\r\n\tel.setAttribute(\"class\", \"barrier\");\r\n\tel.style.width = bwidth + \"px\";\r\n}\r\n\r\n//gen maze using Recursive Backtracking\r\nfunction genMaze(cx, cy, s) {\r\n\t// shuffle unchecked directions\r\n\tlet d = limShuffle(dirs, s);\r\n\r\n\tfor (let i = 0; i < d.length; i++) {\r\n\t\tlet nx = cx + modDir[d[i]].x;\r\n\t\tlet ny = cy + modDir[d[i]].y;\r\n\t\tgrid[cy][cx].v = 1;\r\n\r\n\t\tif (nx >= 0 && nx < mx && ny >= 0 && ny < my && grid[ny][nx].v === 0) {\r\n\t\t\tgrid[cy][cx][d[i]] = 1;\r\n\t\t\tgrid[ny][nx][modDir[d[i]].o] = 1;\r\n\t\t\t//avoid shuffling d if d's not exhausted.. hence the i\r\n\t\t\tgenMaze(nx, ny, i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//draw maze\r\nfunction drawMaze() {\r\n\tfor (let x = 0; x < mx; x++) {\r\n\t\tfor (let y = 0; y < my; y++) {\r\n\t\t\tlet l = grid[y][x].l;\r\n\t\t\tlet r = grid[y][x].r;\r\n\t\t\tlet u = grid[y][x].u;\r\n\t\t\tlet d = grid[y][x].d;\r\n\r\n\t\t\tdrawLines(x, y, l, r, u, d);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//draw the actual lines\r\nfunction drawLines(x, y, l, r, u, d) {\r\n\tlet top = (y + 1) * step;\r\n\tlet left = (x + 1) * step;\r\n\tif (l === 0 && x > 0) {\r\n\t\tlet el = document.createElement(\"div\");\r\n\t\tel.style.left = left + \"px\";\r\n\t\tel.style.height = step + \"px\";\r\n\t\tel.style.top = top + \"px\";\r\n\t\tel.setAttribute(\"class\", \"barrier\");\r\n\t\tel.style.width = bwidth + \"px\";\r\n\t\tmaze.appendChild(el);\r\n\t}\r\n\r\n\tif (d === 0 && y < my - 1) {\r\n\t\tlet el = document.createElement(\"div\");\r\n\t\tel.style.left = left + \"px\";\r\n\t\tel.style.height = bwidth + \"px\";\r\n\t\tel.style.top = top + step + \"px\";\r\n\t\tel.setAttribute(\"class\", \"barrier\");\r\n\t\tel.style.width = step + bwidth + \"px\";\r\n\t\tmaze.appendChild(el);\r\n\t}\r\n}\r\n\r\nfunction limShuffle(array, s) {\r\n\tlet con = array.slice(0, s);\r\n\tlet ran = array.slice(s, array.length);\r\n\r\n\tfor (let i = ran.length - 1; i > 0; i--) {\r\n\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t//console.log(i, j);\r\n\t\t[ran[i], ran[j]] = [ran[j], ran[i]];\r\n\t}\r\n\tlet comb = con.concat(ran);\r\n\treturn comb;\r\n}\r\n\r\nfunction animKeys(key) {\r\n\tif (key.id === \"bu\") {\r\n\t\tkey.style.border = \"3px #fff solid\";\r\n\t\tkey.style.borderTop = \"1px #fff solid\";\r\n\t\tkey.style.borderBottom = \"4px #fff solid\";\r\n\t\tkey.style.transform = \"translateY(-2px)\";\r\n\t}\r\n\tif (key.id === \"bd\") {\r\n\t\tkey.style.border = \"3px #fff solid\";\r\n\t\tkey.style.borderBottom = \"1px #fff solid\";\r\n\t\tkey.style.borderTop = \"4px #fff solid\";\r\n\t\tkey.style.transform = \"translateY(2px)\";\r\n\t}\r\n\tif (key.id === \"bl\") {\r\n\t\tkey.style.border = \"3px #fff solid\";\r\n\t\tkey.style.borderLeft = \"1px #fff solid\";\r\n\t\tkey.style.borderRight = \"4px #fff solid\";\r\n\t\tkey.style.transform = \"translateX(-2px)\";\r\n\t}\r\n\tif (key.id === \"br\") {\r\n\t\tkey.style.border = \"3px #fff solid\";\r\n\t\tkey.style.borderRight = \"1px #fff solid\";\r\n\t\tkey.style.borderLeft = \"4px #fff solid\";\r\n\t\tkey.style.transform = \"translateX(2px)\";\r\n\t}\r\n\r\n\t//reset\r\n\tsetTimeout(() => {\r\n\t\tkey.style.border = \"2px #fff solid\";\r\n\t\tkey.style.borderTop = \"2px #fff solid\";\r\n\t\tkey.style.borderBottom = \"2px #fff solid\";\r\n\t\tkey.style.borderLeft = \"2px #fff solid\";\r\n\t\tkey.style.borderRight = \"2px #fff solid\";\r\n\t\tkey.style.transform = \"translateY(0px)\";\r\n\t\tkey.style.transform = \"translateX(0px)\";\r\n\t}, \"150\");\r\n}\r\n\r\nlet maxl = 0;\r\nlet prevl = 0;\r\nfunction updateEmo(lr) {\r\n\t//simple/manual emo-adjustment - old\r\n\tif (lr) {\r\n\t\tif (thingie.offsetLeft < maxl) {\r\n\t\t\temo.innerHTML = \"ðŸ™„\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft < maxl - 2 * step) {\r\n\t\t\temo.innerHTML = \"ðŸ˜’\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft < maxl - 4 * step) {\r\n\t\t\temo.innerHTML = \"ðŸ˜£\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft < maxl - 6 * step) {\r\n\t\t\temo.innerHTML = \"ðŸ¤¬\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft > prevl) {\r\n\t\t\temo.innerHTML = \"ðŸ˜\";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft >= maxl) {\r\n\t\t\tif (thingie.offsetLeft > mazeWidth * 0.6) {\r\n\t\t\t\temo.innerHTML = \"ðŸ˜€\";\r\n\t\t\t} else {\r\n\t\t\t\temo.innerHTML = \"ðŸ™‚\";\r\n\t\t\t}\r\n\t\t\tmaxl = thingie.offsetLeft;\r\n\t\t}\r\n\t\tif (thingie.offsetLeft === 0) {\r\n\t\t\temo.innerHTML = \"ðŸ˜¢\";\r\n\t\t}\r\n\t\tif (\r\n\t\t\tthingie.offsetLeft > mazeWidth - step &&\r\n\t\t\tthingie.offsetTop === home.offsetTop\r\n\t\t) {\r\n\t\t\temo.innerHTML = \"ðŸ¤—\";\r\n\t\t\thome.innerHTML = \"ðŸ \";\r\n\t\t}\r\n\t\tif (thingie.offsetLeft > mazeWidth) {\r\n\t\t\temo.innerHTML = \"\";\r\n\t\t\thome.innerHTML = \"ðŸ¥³\";\r\n\t\t}\r\n\t\tprevl = thingie.offsetLeft;\r\n\t} else {\r\n\t\tif (thingie.offsetLeft > (mazeWidth - step) && thingie.offsetTop === home.offsetTop) {\r\n\t\t\temo.innerHTML = \"ðŸ¤—\";\r\n\t\t}else{\r\n\t\t\tif(thingie.offsetLeft > (mazeWidth - step) && thingie.offsetTop != home.offsetTo){\r\n\t\t\t\temo.innerHTML = \"ðŸ™„\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// \t//Variant: Detect distance to target using old Greeks: Phytagoras (More scientifically interesting, but somehow less funny ðŸ™ƒ)\r\n\t// \tlet h = home.offsetLeft - thingie.offsetLeft;\r\n\t// \tlet v = Math.abs(home.offsetTop - thingie.offsetTop);\r\n\t// \tlet dist = Math.hypot(h, v);\r\n\t// \tconsole.log(h, v, dist);\r\n\r\n\t// \t//dist = h;\r\n\r\n\t// \t//dynamic stuff\r\n\t// \tif (dist <= prevDist) {\r\n\t// \t\t//happy\r\n\t// \t\temo.innerHTML = \"ðŸ˜€\";\r\n\t// \t} else {\r\n\t// \t\t//sad\r\n\t// \t\temo.innerHTML = \"ðŸ™„\";\r\n\t// \t}\r\n\r\n\t// \t//fixed values\r\n\t// \tif (dist === 20) {\r\n\t// \t\temo.innerHTML = \"ðŸ¤—\";\r\n\t// \t}\r\n\t// \tif (dist === 0) {\r\n\t// \t\temo.innerHTML = \"ðŸ¥³\";\r\n\t// \t\thome.innerHTML = \"\";\r\n\t// \t} else {\r\n\t// \t\thome.innerHTML = \"ðŸ \";\r\n\t// \t}\r\n\r\n\t// \tprevDist = dist;\r\n}\r\n\r\n//navigate with tilting\r\nwindow.addEventListener(\"deviceorientation\", handleOrientation);\r\n\r\nfunction tiltTimer() {\r\n\tallowTilt = false;\r\n\tsetTimeout(() => {\r\n\t\tallowTilt = true;\r\n\t}, \"200\");\r\n}\r\n\r\nfunction handleOrientation(e) {\r\n\t//up/down = beta (smaller = up)\r\n\t//left/right = gamma (neg = left)\r\n\r\n\tif (firstMove) {\r\n\t\tlastUD = e.beta;\r\n\t\tlastLR = e.gamma;\r\n\t\tfirstMove = false;\r\n\t}\r\n\tif (allowTilt) {\r\n\t\tif (e.beta < lastUD - mThreshold) {\r\n\t\t\tup();\r\n\t\t\ttiltTimer();\r\n\t\t}\r\n\t\tif (e.beta > lastUD + mThreshold) {\r\n\t\t\tdown();\r\n\t\t\ttiltTimer();\r\n\t\t}\r\n\t\tif (e.gamma < lastLR - mThreshold) {\r\n\t\t\tleft();\r\n\t\t\ttiltTimer();\r\n\t\t}\r\n\t\tif (e.gamma > lastLR + mThreshold) {\r\n\t\t\tright();\r\n\t\t\ttiltTimer();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//navigate with controller\r\nlet haveEvents = \"ongamepadconnected\" in window;\r\nlet gp = [];\r\nlet allowU = true;\r\nlet allowD = true;\r\nlet allowL = true;\r\nlet allowR = true;\r\n\r\nlet allowAU = true;\r\nlet allowAD = true;\r\nlet allowAL = true;\r\nlet allowAR = true;\r\n\r\nwindow.addEventListener(\"gamepadconnected\", connectGamepad);\r\nwindow.addEventListener(\"gamepaddisconnected\", disconnectGamepad);\r\n\r\nfunction disconnectGamepad() {\r\n\tgp = [];\r\n}\r\n\r\nfunction connectGamepad(e) {\r\n\tconsole.log(\"trying to connect\");\r\n\tgp[0] = e.gamepad;\r\n\trequestAnimationFrame(updateStatus);\r\n}\r\n\r\nfunction updateStatus() {\r\n\tif (!haveEvents) {\r\n\t\tscangamepads();\r\n\t}\r\n\r\n\tfor (let i = 0; i < gp[0].buttons.length; i++) {\r\n\t\t//up\r\n\t\tif (gp[0].buttons[12].pressed) {\r\n\t\t\tif (allowU) {\r\n\t\t\t\tup();\r\n\t\t\t\tgpTimer(\"u\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].buttons[12].pressed === false) {\r\n\t\t\tallowU = true;\r\n\t\t}\r\n\r\n\t\t//down\r\n\t\tif (gp[0].buttons[13].pressed) {\r\n\t\t\tif (allowD) {\r\n\t\t\t\tdown();\r\n\t\t\t\tgpTimer(\"d\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].buttons[13].pressed === false) {\r\n\t\t\tallowD = true;\r\n\t\t}\r\n\r\n\t\t//left\r\n\t\tif (gp[0].buttons[14].pressed) {\r\n\t\t\tif (allowL) {\r\n\t\t\t\tleft();\r\n\t\t\t\tgpTimer(\"l\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].buttons[14].pressed === false) {\r\n\t\t\tallowL = true;\r\n\t\t}\r\n\r\n\t\t//up\r\n\t\tif (gp[0].buttons[15].pressed) {\r\n\t\t\tif (allowR) {\r\n\t\t\t\tright();\r\n\t\t\t\tgpTimer(\"r\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].buttons[15].pressed === false) {\r\n\t\t\tallowR = true;\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let j = 0; j < gp[0].axes.length; j++) {\r\n\t\t//console.log(gp[0].axes[3]);\r\n\t\tif (gp[0].axes[1] < -0.8 || gp[0].axes[3] < -0.8) {\r\n\t\t\tif (allowAU) {\r\n\t\t\t\tup();\r\n\t\t\t\tgpATimer(\"u\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].axes[1] > 0.8 || gp[0].axes[3] > 0.8) {\r\n\t\t\tif (allowAD) {\r\n\t\t\t\tdown();\r\n\t\t\t\tgpATimer(\"d\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].axes[0] < -0.8 || gp[0].axes[2] < -0.8) {\r\n\t\t\tif (allowAL) {\r\n\t\t\t\tleft();\r\n\t\t\t\tgpATimer(\"l\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (gp[0].axes[0] > 0.8 || gp[0].axes[2] > 0.8) {\r\n\t\t\tif (allowAR) {\r\n\t\t\t\tright();\r\n\t\t\t\tgpATimer(\"r\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trequestAnimationFrame(updateStatus);\r\n}\r\n\r\nfunction scangamepads() {\r\n\tvar gamepads = navigator.getGamepads\r\n\t\t? navigator.getGamepads()\r\n\t\t: navigator.webkitGetGamepads\r\n\t\t? navigator.webkitGetGamepads()\r\n\t\t: [];\r\n\tfor (var i = 0; i < gamepads.length; i++) {\r\n\t\tif (gamepads[i]) {\r\n\t\t\tif (gamepads[i].index in gp) {\r\n\t\t\t\tgp[gamepads[i].index] = gamepads[i];\r\n\t\t\t} else {\r\n\t\t\t\taddgamepad(gamepads[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nif (!haveEvents) {\r\n\tsetInterval(scangamepads, 500);\r\n}\r\n\r\nfunction gpTimer(adir) {\r\n\tswitch (adir) {\r\n\t\tcase \"u\":\r\n\t\t\tallowU = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"d\":\r\n\t\t\tallowD = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"l\":\r\n\t\t\tallowL = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"r\":\r\n\t\t\tallowR = false;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tsetTimeout(() => {\r\n\t\tallowU = true;\r\n\t\tallowD = true;\r\n\t\tallowL = true;\r\n\t\tallowR = true;\r\n\t}, \"200\");\r\n}\r\n\r\nfunction gpATimer(adir) {\r\n\tswitch (adir) {\r\n\t\tcase \"u\":\r\n\t\t\tallowAU = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"d\":\r\n\t\t\tallowAD = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"l\":\r\n\t\t\tallowAL = false;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"r\":\r\n\t\t\tallowAR = false;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tsetTimeout(() => {\r\n\t\tallowAU = true;\r\n\t\tallowAD = true;\r\n\t\tallowAL = true;\r\n\t\tallowAR = true;\r\n\t}, \"200\");\r\n}\r\n\r\n\r\n\r\n//Navigate with swipe\r\nlet lasttouchpY = 0;\r\nlet lasttouchpX = 0;\r\ncont.addEventListener(\"touchstart\", (e) => {\r\n\tlasttouchpY = e.changedTouches[0].pageY;\r\n\tlasttouchpX = e.changedTouches[0].pageX;\r\n});\r\n\r\ncont.addEventListener(\"touchmove\", (e) => {\r\n\te.preventDefault();\r\n\t//console.log(\"touch \" + e.changedTouches[0].pageY);\r\n\tlet diffY = e.changedTouches[0].pageY - lasttouchpY;\r\n\tlet diffX = e.changedTouches[0].pageX - lasttouchpX;\r\n\tif (diffY > sThreshold) {\r\n\t\tdown();\r\n\t\tlasttouchpY = e.changedTouches[0].pageY;\r\n\t} else {\r\n\t\tif (diffY < -1 * sThreshold) {\r\n\t\t\tup();\r\n\t\t\tlasttouchpY = e.changedTouches[0].pageY;\r\n\t\t}\r\n\t}\r\n\tif (diffX > sThreshold) {\r\n\t\tright();\r\n\t\tlasttouchpX = e.changedTouches[0].pageX;\r\n\t} else {\r\n\t\tif (diffX < -1 * sThreshold) {\r\n\t\t\tleft();\r\n\t\t\tlasttouchpX = e.changedTouches[0].pageX;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n//Navigate with scrolling\r\nlet lastscrollpY = 0;\r\nlet lastscrollpX = 0;\r\ncont.addEventListener(\"wheel\", (e) => {\r\n\t//console.log(\"scrollY: \" + e.deltaY + \" scrollX: \" + e.deltaX);\r\n\r\n\t//handle Y scrolling\r\n\tlastscrollpY = lastscrollpY + e.deltaY;\r\n\tif (lastscrollpY > 0 && e.deltaY < 0) {\r\n\t\tlastscrollpY = 0;\r\n\t}\r\n\tif (lastscrollpY < 0 && e.deltaY > 0) {\r\n\t\tlastscrollpY = 0;\r\n\t}\r\n\r\n\tif (lastscrollpY > scThreshold) {\r\n\t\tup();\r\n\t\tlastscrollpY = 0;\r\n\t}\r\n\t\tif (lastscrollpY < (-1 * scThreshold)) {\r\n\t\tdown();\r\n\t\tlastscrollpY = 0;\r\n\t}\r\n\t\r\n\t//handle X scrolling\r\n\tlastscrollpX = lastscrollpX + e.deltaX;\r\n\tif (lastscrollpX > 0 && e.deltaX < 0) {\r\n\t\tlastscrollpX = 0;\r\n\t}\r\n\tif (lastscrollpX < 0 && e.deltaX > 0) {\r\n\t\tlastscrollpX = 0;\r\n\t}\r\n\r\n\tif (lastscrollpX > scThreshold) {\r\n\t\tleft();\r\n\t\tlastscrollpX = 0;\r\n\t}\r\n\t\tif (lastscrollpX < (-1 * scThreshold)) {\r\n\t\tright();\r\n\t\tlastscrollpX = 0;\r\n\t}\r\n});\r\n"],"file":"script.dev.js"}